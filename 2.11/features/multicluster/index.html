<!doctype html><html lang=en><head><meta charset=utf-8><title>Multi-cluster communication | Linkerd</title>
<link rel="shortcut icon" href=/favicon.png><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Linkerd can transparently and securely connect services that are running in different clusters."><meta property="og:url" content="https://travisbeckham.github.io/2.11/features/multicluster/"><meta property="og:site_name" content="Linkerd"><meta property="og:title" content="Multi-cluster communication"><meta property="og:description" content="Linkerd can transparently and securely connect services that are running in different clusters."><meta property="og:locale" content="en_us"><meta property="og:type" content="article"><meta property="article:section" content="2.11"><meta property="og:image" content="https://travisbeckham.github.io/logos/linkerd.png"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://travisbeckham.github.io/logos/linkerd.png"><meta name=twitter:title content="Multi-cluster communication"><meta name=twitter:description content="Linkerd can transparently and securely connect services that are running in different clusters."><meta name=twitter:site content="@Linkerd"><link rel=canonical href=https://travisbeckham.github.io/2.11/features/multicluster/><link rel=stylesheet href=/css/main.css><script src=/js/main.js></script><script async defer src=https://buttons.github.io/buttons.js></script></head><body><header class=main-header><div class=main-header__container><div class=main-header__logo><a href=/><img src=/logos/linkerd.png alt=Linkerd></a></div><input class=main-header__toggle-checkbox type=checkbox id=main-header-toggle>
<label class=main-header__toggle for=main-header-toggle><span class=main-header__toggle-icon><span class=main-header__toggle-icon--open><svg class="icon icon--primary" viewBox="0 0 24 24"><path d="M3 6H21V8H3V6m0 5H21v2H3V11m0 5H21v2H3V16z"/></svg>
</span><span class=main-header__toggle-icon--close><svg class="icon icon--primary" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg></span></span></label><div class=main-header__nav><nav class=main-nav><ul class=main-nav__menu><li class=main-nav__menu--selected><a href=/docs>Docs</a></li><li><a href=#>Community<svg class="icon icon--primary" viewBox="0 0 24 24"><path d="M7.41 8.58 12 13.17l4.59-4.59L18 10l-6 6-6-6L7.41 8.58z"/></svg></a><ul><li><a href=/community/get-involved/>Get Involved</a></li><li><a href=/community/adopters/>Adopters</a></li><li><a href=/community/ambassadors/>Linkerd Ambassadors</a></li><li><a href=https://linkerd.buoyant.io target=_blank rel=noopener>Buoyant's Linkerd Forum</a></li></ul></li><li><a href=/blog/>Blog</a></li><li><a href=/faq/>FAQ</a></li><li><a href=/enterprise/>Enterprise</a></li></ul><div class=main-nav__search><form action=/search method=get><div class="search-input search-input--sm"><svg class="icon" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5.0 0116 9.5c0 1.61-.59 3.09-1.56 4.23L14.71 14H15.5l5 5L19 20.5l-5-5V14.71L13.73 14.44C12.59 15.41 11.11 16 9.5 16A6.5 6.5.0 013 9.5 6.5 6.5.0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
<input type=text name=q placeholder=Search></div></form></div><div class=main-nav__github><a class=github-button href=https://github.com/linkerd/linkerd2 data-icon=octicon-star data-size=large data-show-count=true aria-label="Star linkerd/linkerd2 on GitHub">Star</a></div><div class=main-nav__forum><a href=https://linkerd.buoyant.io class="button button--primary button--sm" target=_blank rel=noopener>Join Forum</a></div></nav></div></div></header><div class=main-announcement>Service Mesh 101: Get Service Mesh-Certified
<span class=main-announcement__link><a href=https://buoyant.io/courses/service-mesh-101 target=_blank rel=noopener>Enroll now</a></span></div><main class=main-content><div class="alert alert--warning alert--condensed alert--center docs__deprecated-alert"><div class=alert__content>You are viewing docs for an older version of Linkerd.
<a href=/2.16/>View the latest docs</a>.</div></div><div class=docs><div class=docs__container><div class=docs__sidebar><div class=docs__nav><div class=docs__versions><select onchange="window.location.href=this.value"><option value=/2-edge/>Linkerd edge</option><option value=/2.16/>Linkerd 2.16</option><option value=/2.15/>Linkerd 2.15</option><option value=/2.14/>Linkerd 2.14</option><option value=/2.13/>Linkerd 2.13</option><option value=/2.12/>Linkerd 2.12</option><option value=/2.11/ selected>Linkerd 2.11</option><option value=/2.10/>Linkerd 2.10</option></select></div><nav><ul><li><a href=/2.11/overview/>Overview</a></li><li><a href=/2.11/getting-started/>Getting Started</a></li><li class=docs__nav--selected><a href=/2.11/features/>Features
</a><input class=toggle__input type=checkbox id=toggle-00ef7d1751a09ab18b1a0e3672bd135a checked>
<label class=toggle__label for=toggle-00ef7d1751a09ab18b1a0e3672bd135a><svg class="icon icon--secondary" viewBox="0 0 24 24"><path d="M8.59 16.58 13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg></label><ul class=toggle__target><li><a href=/2.11/features/http-grpc/>HTTP, HTTP/2, and gRPC Proxying</a></li><li><a href=/2.11/features/protocol-detection/>TCP Proxying and Protocol Detection</a></li><li><a href=/2.11/features/retries-and-timeouts/>Retries and Timeouts</a></li><li><a href=/2.11/features/automatic-mtls/>Automatic mTLS</a></li><li><a href=/2.11/features/ingress/>Ingress</a></li><li><a href=/2.11/features/telemetry/>Telemetry and Monitoring</a></li><li><a href=/2.11/features/load-balancing/>Load Balancing</a></li><li><a href=/2.11/features/server-policy/>Authorization Policy</a></li><li><a href=/2.11/features/proxy-injection/>Automatic Proxy Injection</a></li><li><a href=/2.11/features/cni/>CNI Plugin</a></li><li><a href=/2.11/features/distributed-tracing/>Distributed Tracing</a></li><li><a href=/2.11/features/fault-injection/>Fault Injection</a></li><li><a href=/2.11/features/ha/>High Availability</a></li><li class=docs__nav--selected><a href=/2.11/features/multicluster/>Multi-cluster communication</a></li><li><a href=/2.11/features/dashboard/>On-cluster metrics stack</a></li><li><a href=/2.11/features/service-profiles/>Service Profiles</a></li><li><a href=/2.11/features/traffic-split/>Traffic Split (canaries, blue/green deploys)</a></li></ul></li><li><a href=/2.11/tasks/>Tasks
</a><input class=toggle__input type=checkbox id=toggle-7b9227afccfad80ce551f98ae9468000>
<label class=toggle__label for=toggle-7b9227afccfad80ce551f98ae9468000><svg class="icon icon--secondary" viewBox="0 0 24 24"><path d="M8.59 16.58 13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg></label><ul class=toggle__target><li><a href=/2.11/tasks/adding-your-service/>Adding your services to Linkerd</a></li><li><a href=/2.11/tasks/canary-release/>Automated Canary Releases</a></li><li><a href=/2.11/tasks/automatic-failover/>Automatic Multicluster Failover</a></li><li><a href=/2.11/tasks/automatically-rotating-control-plane-tls-credentials/>Automatically Rotating Control Plane TLS Credentials</a></li><li><a href=/2.11/tasks/automatically-rotating-webhook-tls-credentials/>Automatically Rotating Webhook TLS Credentials</a></li><li><a href=/2.11/tasks/external-prometheus/>Bringing your own Prometheus</a></li><li><a href=/2.11/tasks/configuring-proxy-concurrency/>Configuring Proxy Concurrency</a></li><li><a href=/2.11/tasks/configuring-retries/>Configuring Retries</a></li><li><a href=/2.11/tasks/configuring-timeouts/>Configuring Timeouts</a></li><li><a href=/2.11/tasks/using-debug-endpoints/>Control Plane Debug Endpoints</a></li><li><a href=/2.11/tasks/customize-install/>Customizing Linkerd's Configuration with Kustomize</a></li><li><a href=/2.11/tasks/debugging-502s/>Debugging 502s</a></li><li><a href=/2.11/tasks/debugging-your-service/>Debugging gRPC applications with request tracing</a></li><li><a href=/2.11/tasks/books/>Debugging HTTP applications with per-route metrics</a></li><li><a href=/2.11/tasks/distributed-tracing/>Distributed tracing with Linkerd</a></li><li><a href=/2.11/tasks/exporting-metrics/>Exporting Metrics</a></li><li><a href=/2.11/tasks/exposing-dashboard/>Exposing the Dashboard</a></li><li><a href=/2.11/tasks/generate-certificates/>Generating your own mTLS root certificates</a></li><li><a href=/2.11/tasks/getting-per-route-metrics/>Getting Per-Route Metrics</a></li><li><a href=/2.11/tasks/linkerd-smi/>Getting started with Linkerd SMI extension</a></li><li><a href=/2.11/tasks/graceful-shutdown/>Graceful Pod Shutdown</a></li><li><a href=/2.11/tasks/grafana/>Grafana</a></li><li><a href=/2.11/tasks/using-ingress/>Ingress traffic</a></li><li><a href=/2.11/tasks/fault-injection/>Injecting Faults</a></li><li><a href=/2.11/tasks/install/>Installing Linkerd</a></li><li><a href=/2.11/tasks/install-helm/>Installing Linkerd with Helm</a></li><li><a href=/2.11/tasks/installing-multicluster/>Installing Multi-cluster Components</a></li><li><a href=/2.11/tasks/using-psp/>Linkerd and Pod Security Policies (PSP)</a></li><li><a href=/2.11/tasks/manually-rotating-control-plane-tls-credentials/>Manually Rotating Control Plane TLS Credentials</a></li><li><a href=/2.11/tasks/modifying-proxy-log-level/>Modifying the Proxy Log Level</a></li><li><a href=/2.11/tasks/multicluster/>Multi-cluster communication</a></li><li><a href=/2.11/tasks/multicluster-using-statefulsets/>Multi-cluster communication with StatefulSets</a></li><li><a href=/2.11/tasks/replacing_expired_certificates/>Replacing expired certificates</a></li><li><a href=/2.11/tasks/restricting-access/>Restricting Access To Services</a></li><li><a href=/2.11/tasks/rotating_webhooks_certificates/>Rotating webhooks certificates</a></li><li><a href=/2.11/tasks/securing-your-cluster/>Securing Your Cluster</a></li><li><a href=/2.11/tasks/setting-up-service-profiles/>Setting Up Service Profiles</a></li><li><a href=/2.11/tasks/troubleshooting/>Troubleshooting</a></li><li><a href=/2.11/tasks/uninstall/>Uninstalling Linkerd</a></li><li><a href=/2.11/tasks/uninstall-multicluster/>Uninstalling Multicluster</a></li><li><a href=/2.11/tasks/upgrade/>Upgrading Linkerd</a></li><li><a href=/2.11/tasks/upgrade-multicluster/>Upgrading Multicluster in Linkerd 2.9</a></li><li><a href=/2.11/tasks/using-custom-domain/>Using a Custom Cluster Domain</a></li><li><a href=/2.11/tasks/using-a-private-docker-repository/>Using A Private Docker Repository</a></li><li><a href=/2.11/tasks/extensions/>Using extensions</a></li><li><a href=/2.11/tasks/gitops/>Using GitOps with Linkerd with Argo CD</a></li><li><a href=/2.11/tasks/using-the-debug-container/>Using the Debug Sidecar</a></li><li><a href=/2.11/tasks/validating-your-traffic/>Validating your mTLS traffic</a></li></ul></li><li><a href=/2.11/reference/>Reference
</a><input class=toggle__input type=checkbox id=toggle-951a8405bc0d2ef0503c27bdaa20c05b>
<label class=toggle__label for=toggle-951a8405bc0d2ef0503c27bdaa20c05b><svg class="icon icon--secondary" viewBox="0 0 24 24"><path d="M8.59 16.58 13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg></label><ul class=toggle__target><li><a href=/2.11/reference/architecture/>Architecture</a></li><li><a href=/2.11/reference/authorization-policy/>Authorization Policy</a></li><li><a href=/2.11/reference/cli/>CLI
</a><input class=toggle__input type=checkbox id=toggle-5ab67513e4905c4b33f4cb426c02718f>
<label class=toggle__label for=toggle-5ab67513e4905c4b33f4cb426c02718f><svg class="icon icon--secondary" viewBox="0 0 24 24"><path d="M8.59 16.58 13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg></label><ul class=toggle__target><li><a href=/2.11/reference/cli/authz/>authz</a></li><li><a href=/2.11/reference/cli/check/>check</a></li><li><a href=/2.11/reference/cli/completion/>completion</a></li><li><a href=/2.11/reference/cli/diagnostics/>diagnostics</a></li><li><a href=/2.11/reference/cli/identity/>identity</a></li><li><a href=/2.11/reference/cli/inject/>inject</a></li><li><a href=/2.11/reference/cli/install/>install</a></li><li><a href=/2.11/reference/cli/install-cni/>install-cni</a></li><li><a href=/2.11/reference/cli/jaeger/>jaeger</a></li><li><a href=/2.11/reference/cli/multicluster/>multicluster</a></li><li><a href=/2.11/reference/cli/profile/>profile</a></li><li><a href=/2.11/reference/cli/repair/>repair</a></li><li><a href=/2.11/reference/cli/uninject/>uninject</a></li><li><a href=/2.11/reference/cli/uninstall/>uninstall</a></li><li><a href=/2.11/reference/cli/upgrade/>upgrade</a></li><li><a href=/2.11/reference/cli/version/>version</a></li><li><a href=/2.11/reference/cli/viz/>viz</a></li></ul></li><li><a href=/2.11/reference/cluster-configuration/>Cluster Configuration</a></li><li><a href=/2.11/reference/extension-list/>Extensions List</a></li><li><a href=/2.11/reference/helm-chart-version-matrix/>Helm Chart Version Matrix</a></li><li><a href=/2.11/reference/iptables/>IPTables Reference</a></li><li><a href=/2.11/reference/proxy-configuration/>Proxy Configuration</a></li><li><a href=/2.11/reference/proxy-log-level/>Proxy Log Level</a></li><li><a href=/2.11/reference/proxy-metrics/>Proxy Metrics</a></li><li><a href=/2.11/reference/service-profiles/>Service Profiles</a></li></ul></li></ul><ul><li><a href=/what-is-a-service-mesh/>What is a service mesh?</a></li><li><a href=/faq/>Frequently Asked Questions</a></li><li><a href=/releases/>Releases and Versions</a></li><li><a href=/design-principles/>Design Principles</a></li><li><a href=/going-to-production/>Going to Production</a></li><li><a href=/service-mesh-glossary/>Service Mesh Glossary</a></li></ul></nav><div class=docs__community><ul><li><a href=https://github.com/linkerd/linkerd2 target=_blank rel=noopener><img src=/logos/github.svg alt=GitHub class=img></a></li><li><a href=https://slack.linkerd.io target=_blank rel=noopener><img src=/logos/slack.svg alt=Slack class=img></a></li><li><a href=https://linkerd.buoyant.io target=_blank rel=noopener><img src=/logos/forum.png alt="Linkerd Forum" class=img></a></li></ul></div></div></div><div class=docs__main><div class=docs__body><div class=docs__header><h1>Multi-cluster communication</h1></div><div class="docs__content prose"><p>Linkerd can connect Kubernetes services across cluster boundaries in a way that
is secure, fully transparent to the application, and independent of network
topology. This multi-cluster capability is designed to provide:</p><ol><li><strong>A unified trust domain.</strong> The identity of source and destination workloads
are validated at every step, both in and across cluster boundaries.</li><li><strong>Separate failure domains.</strong> Failure of a cluster allows the remaining
clusters to function.</li><li><strong>Support for heterogeneous networks.</strong> Since clusters can span clouds,
VPCs, on-premises data centers, and combinations thereof, Linkerd does not
introduce any L3/L4 requirements other than gateway connectivity.</li><li><strong>A unified model alongside in-cluster communication.</strong> The same
observability, reliability, and security features that Linkerd provides for
in-cluster communication extend to cross-cluster communication.</li></ol><p>Just as with in-cluster connections, Linkerd’s cross-cluster connections are
transparent to the application code. Regardless of whether that communication
happens within a cluster, across clusters within a datacenter or VPC, or across
the public Internet, Linkerd will establish a connection between clusters
that’s encrypted and authenticated on both sides with mTLS.</p><h2 id=how-it-works class=anchor>How it works
<a href=#how-it-works class=anchor__link><svg class="icon icon--primary" viewBox="0 0 24 24"><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7A5 5 0 002 12a5 5 0 005 5h4V15.1H7c-1.71.0-3.1-1.39-3.1-3.1M8 13h8V11H8v2m9-6H13V8.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1H13V17h4a5 5 0 005-5A5 5 0 0017 7z"/></svg></a></h2><p>Linkerd&rsquo;s multi-cluster support works by &ldquo;mirroring&rdquo; service information
between clusters. Because remote services are represented as Kubernetes
services, the full observability, security and routing features of Linkerd
apply uniformly to both in-cluster and cluster-calls, and the application does
not need to distinguish between those situations.</p><figure><img alt=Overview class="img img--max-fill img--center img--rounded" src=/docs/images/multicluster/feature-overview.svg><figcaption>Overview</figcaption></figure><p>Linkerd&rsquo;s multi-cluster functionality is implemented by two components:
a <em>service mirror</em> and a <em>gateway</em>. The <em>service mirror</em> component watches
a target cluster for updates to services and mirrors those service updates
locally on a source cluster. This provides visibility into the service names of
the target cluster so that applications can address them directly. The
<em>multi-cluster gateway</em> component provides target clusters a way to receive
requests from source clusters. (This allows Linkerd to support <a href=/2020/02/17/architecting-for-multicluster-kubernetes/#requirement-i-support-hierarchical-networks>hierarchical
networks</a>.)</p><p>Once these components are installed, Kubernetes <code>Service</code> resources that match
a label selector can be exported to other clusters.</p><h2 id=headless-services class=anchor>Headless services
<a href=#headless-services class=anchor__link><svg class="icon icon--primary" viewBox="0 0 24 24"><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7A5 5 0 002 12a5 5 0 005 5h4V15.1H7c-1.71.0-3.1-1.39-3.1-3.1M8 13h8V11H8v2m9-6H13V8.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1H13V17h4a5 5 0 005-5A5 5 0 0017 7z"/></svg></a></h2><p>By default, Linkerd will mirror all exported services as Kubernetes <code>clusterIP</code>
services. This also extends to <a href=https://kubernetes.io/docs/concepts/services-networking/service/#headless-services target=_blank rel=noopener>headless services</a>; an exported
headless service will be mirrored as <code>clusterIP</code> and have an IP address
assigned to it. In general, headless services <em>should not have an IP address</em>,
they are used when a workloads needs a stable network identifier or to
facilitate service discovery without being tied to Kubernetes&rsquo; native
implementation. This allows clients to either implement their own load
balancing or to address a pod directly through its DNS name. In certain
situations, it is desirable to preserve some of this functionality, especially
when working with Kubernetes objects that require it, such as
<a href=https://kubernetes.io/docs/concepts/workloads/controllers/statefulset/ target=_blank rel=noopener>StatefulSet</a>.</p><p>Linkerd&rsquo;s multi-cluster extension can be configured with support for headless
services when linking two clusters together. When the feature is turned on, the
<em>service mirror</em> component will export headless services without assigning them
an IP. This allows clients to talk to specific pods (or hosts) across clusters.
To support direct communication, underneath the hood, the service mirror
component will create an <em>endpoint mirror</em> for each host that backs a headless
service. To exemplify, if in a target cluster there is a StatefulSet deployed
with two replicas, and the StatefulSet is backed by a headless service, when
the service will be exported, the source cluster will create a headless mirror
along with two &ldquo;endpoint mirrors&rdquo; representing the hosts in the StatefulSet.</p><p>This approach allows Linkerd to preserve DNS record creation and support direct
communication to pods across clusters. Clients may also implement their own
load balancing based on the DNS records created by the headless service.
Hostnames are also preserved across clusters, meaning that the only difference
in the DNS name (or FQDN) is the headless service&rsquo;s mirror name. In order to be
exported as a headless service, the hosts backing the service need to be named
(e.g a StatefulSet is supported since all pods have a hostname, but a
Deployment would not be supported, since they do not allow for arbitrary
hostnames in the pod spec).</p><p>Ready to get started? See the <a href=../../tasks/multicluster/>getting started with multi-cluster
guide</a> for a walkthrough.</p><h2 id=further-reading class=anchor>Further reading
<a href=#further-reading class=anchor__link><svg class="icon icon--primary" viewBox="0 0 24 24"><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7A5 5 0 002 12a5 5 0 005 5h4V15.1H7c-1.71.0-3.1-1.39-3.1-3.1M8 13h8V11H8v2m9-6H13V8.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1H13V17h4a5 5 0 005-5A5 5 0 0017 7z"/></svg></a></h2><ul><li><a href=../../tasks/installing-multicluster/>Multi-cluster installation instructions</a>.</li><li><a href=../../tasks/multicluster-using-statefulsets/>Multi-cluster communication with StatefulSets</a>.</li><li><a href=/2020/02/17/architecting-for-multicluster-kubernetes/>Architecting for multi-cluster
Kubernetes</a>, a blog
post explaining some of the design rationale behind Linkerd&rsquo;s multi-cluster
implementation.</li><li><a href=/2020/02/25/multicluster-kubernetes-with-service-mirroring/>Multi-cluster Kubernetes with service
mirroring</a>, a
deep dive of some of the architectural decisions behind Linkerd&rsquo;s
multi-cluster implementation.</li></ul></div></div></div></div></div></main><footer class=main-footer><div class=main-footer__top><div class="main-footer__container container"><div class=main-footer__info><p><img src=/logos/linkerd.png alt=Linkerd></p><p>Linkerd was originally created by <a href=https://buoyant.io/ target=_blank rel=noopener>Buoyant</a></p><p>View <a href=https://github.com/linkerd/linkerd/wiki/Linkerd-code-of-conduct target=_blank rel=noopener>Code of Conduct</a></p></div><div class=main-footer__links><div class=main-footer__community><h4>Community</h4><ul><li><a href=https://github.com/linkerd/linkerd2 target=_blank rel=noopener>GitHub</a></li><li><a href=https://slack.linkerd.io target=_blank rel=noopener>Slack</a></li><li><a href=https://linkerd.buoyant.io target=_blank rel=noopener>Linkerd Forum</a></li></ul></div><div class=main-footer__follow><h4>Follow</h4><ul><li><a href=https://www.linkedin.com/company/linkerd/ target=_blank rel=noopener>Linkedin</a></li><li><a href=https://www.youtube.com/buoyantio target=_blank rel=noopener>YouTube</a></li><li><a href=https://twitter.com/linkerd target=_blank rel=noopener>Twitter</a></li></ul></div></div></div></div><div class=main-footer__bottom><div class="main-footer__container container"><p><a href=https://github.com/linkerd/website/tree/main/linkerd.io/content target=_blank rel=noopener>Edit This Site</a></p><p>Copyright © 2024 Linkerd Authors. All rights reserved.</p></div></div></footer></body></html>