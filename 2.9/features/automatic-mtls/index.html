<!doctype html><html lang=en><head><meta charset=utf-8><title>Automatic mTLS | Linkerd</title>
<link rel="shortcut icon" href=/favicon.png><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Linkerd automatically enables mutual Transport Layer Security (TLS) for all communication between meshed applications."><meta property="og:url" content="https://travisbeckham.github.io/2.9/features/automatic-mtls/"><meta property="og:site_name" content="Linkerd"><meta property="og:title" content="Automatic mTLS"><meta property="og:description" content="Linkerd automatically enables mutual Transport Layer Security (TLS) for all communication between meshed applications."><meta property="og:locale" content="en_us"><meta property="og:type" content="article"><meta property="article:section" content="2.9"><meta property="og:image" content="https://travisbeckham.github.io/logos/linkerd.png"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://travisbeckham.github.io/logos/linkerd.png"><meta name=twitter:title content="Automatic mTLS"><meta name=twitter:description content="Linkerd automatically enables mutual Transport Layer Security (TLS) for all communication between meshed applications."><meta name=twitter:site content="@Linkerd"><link rel=canonical href=https://travisbeckham.github.io/2.9/features/automatic-mtls/><link rel=stylesheet href=/css/main.css><script src=/js/main.js></script><script async defer src=https://buttons.github.io/buttons.js></script></head><body><header class=main-header><div class=main-header__container><div class=main-header__logo><a href=/><img src=/logos/linkerd.png alt=Linkerd></a></div><input class=main-header__toggle-checkbox type=checkbox id=main-header-toggle>
<label class=main-header__toggle for=main-header-toggle><span class=main-header__toggle-icon><span class=main-header__toggle-icon--open><svg class="icon icon--primary" viewBox="0 0 24 24"><path d="M3 6H21V8H3V6m0 5H21v2H3V11m0 5H21v2H3V16z"/></svg>
</span><span class=main-header__toggle-icon--close><svg class="icon icon--primary" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg></span></span></label><div class=main-header__nav><nav class=main-nav><ul class=main-nav__menu><li class=main-nav__menu--selected><a href=/docs>Docs</a></li><li><a href>Community<svg class="icon icon--primary" viewBox="0 0 24 24"><path d="M7.41 8.58 12 13.17l4.59-4.59L18 10l-6 6-6-6L7.41 8.58z"/></svg></a><ul><li><a href=/community/get-involved/>Get Involved</a></li><li><a href=/community/adopters/>Adopters</a></li><li><a href=/community/ambassadors/>Linkerd Ambassadors</a></li><li><a href=/community/heroes/>Linkerd Heroes</a></li><li><a href=https://linkerd.buoyant.io target=_blank rel=noopener>Buoyant's Linkerd Forum</a></li></ul></li><li><a href=/blog/>Blog</a></li><li><a href=/faq/>FAQ</a></li><li><a href=/enterprise/>Enterprise</a></li></ul><div class=main-nav__search><form action=/search method=get><div class="search-input search-input--sm"><svg class="icon" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5.0 0116 9.5c0 1.61-.59 3.09-1.56 4.23L14.71 14H15.5l5 5L19 20.5l-5-5V14.71L13.73 14.44C12.59 15.41 11.11 16 9.5 16A6.5 6.5.0 013 9.5 6.5 6.5.0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
<input type=text name=q placeholder=Search></div></form></div><div class=main-nav__github><a class=github-button href=https://github.com/linkerd/linkerd2 data-icon=octicon-star data-size=large data-show-count=true aria-label="Star linkerd/linkerd2 on GitHub">Star</a></div><div class=main-nav__forum><a href=https://linkerd.buoyant.io class="button button--primary button--sm" target=_blank rel=noopener>Join Forum</a></div></nav></div></div></header><div class=main-announcement>Service Mesh 101: Get Service Mesh-Certified
<span class=main-announcement__link><a href=https://buoyant.io/courses/service-mesh-101 target=_blank rel=noopener>Enroll now</a></span></div><main class=main-content><div class="alert alert--warning alert--condensed alert--center docs__deprecated-alert"><div class=alert__content>You are viewing docs for an older version of Linkerd.
<a href=/2.16/>View the latest docs</a>.</div></div><div class=docs><div class=docs__container><div class=docs__sidebar><div class=docs__nav><div class=docs__versions><select onchange="window.location.href=this.value"><option value=/2-edge/>Linkerd edge</option><option value=/2.16/>Linkerd 2.16</option><option value=/2.15/>Linkerd 2.15</option><option value=/2.14/>Linkerd 2.14</option><option value=/2.13/>Linkerd 2.13</option><option value=/2.12/>Linkerd 2.12</option><option value=/2.11/>Linkerd 2.11</option><option value=/2.10/>Linkerd 2.10</option><option value=/2.9/ selected>Linkerd 2.9</option></select></div><nav><ul><li><a href=/2.9/overview/>Overview</a></li><li><a href=/2.9/getting-started/>Getting Started</a></li><li class=docs__nav--selected><a href=/2.9/features/>Features
</a><input class=toggle__input type=checkbox id=toggle-e4cde74e0b82591bbb113b641faed73d checked>
<label class=toggle__label for=toggle-e4cde74e0b82591bbb113b641faed73d><svg class="icon icon--secondary" viewBox="0 0 24 24"><path d="M8.59 16.58 13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg></label><ul class=toggle__target><li><a href=/2.9/features/http-grpc/>HTTP, HTTP/2, and gRPC Proxying</a></li><li><a href=/2.9/features/protocol-detection/>TCP Proxying and Protocol Detection</a></li><li><a href=/2.9/features/retries-and-timeouts/>Retries and Timeouts</a></li><li class=docs__nav--selected><a href=/2.9/features/automatic-mtls/>Automatic mTLS</a></li><li><a href=/2.9/features/ingress/>Ingress</a></li><li><a href=/2.9/features/telemetry/>Telemetry and Monitoring</a></li><li><a href=/2.9/features/load-balancing/>Load Balancing</a></li><li><a href=/2.9/features/proxy-injection/>Automatic Proxy Injection</a></li><li><a href=/2.9/features/cni/>CNI Plugin</a></li><li><a href=/2.9/features/dashboard/>Dashboard and Grafana</a></li><li><a href=/2.9/features/distributed-tracing/>Distributed Tracing</a></li><li><a href=/2.9/features/fault-injection/>Fault Injection</a></li><li><a href=/2.9/features/ha/>High Availability</a></li><li><a href=/2.9/features/multicluster/>Multi-cluster communication</a></li><li><a href=/2.9/features/service-profiles/>Service Profiles</a></li><li><a href=/2.9/features/traffic-split/>Traffic Split (canaries, blue/green deploys)</a></li></ul></li><li><a href=/2.9/tasks/>Tasks
</a><input class=toggle__input type=checkbox id=toggle-5e629638c4c6eed35a2c9c4890c08f16>
<label class=toggle__label for=toggle-5e629638c4c6eed35a2c9c4890c08f16><svg class="icon icon--secondary" viewBox="0 0 24 24"><path d="M8.59 16.58 13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg></label><ul class=toggle__target><li><a href=/2.9/tasks/adding-your-service/>Adding Your Services to Linkerd</a></li><li><a href=/2.9/tasks/canary-release/>Automated Canary Releases</a></li><li><a href=/2.9/tasks/automatically-rotating-control-plane-tls-credentials/>Automatically Rotating Control Plane TLS Credentials</a></li><li><a href=/2.9/tasks/automatically-rotating-webhook-tls-credentials/>Automatically Rotating Webhook TLS Credentials</a></li><li><a href=/2.9/tasks/external-prometheus/>Bringing your own Prometheus</a></li><li><a href=/2.9/tasks/configuring-proxy-concurrency/>Configuring Proxy Concurrency</a></li><li><a href=/2.9/tasks/configuring-retries/>Configuring Retries</a></li><li><a href=/2.9/tasks/configuring-timeouts/>Configuring Timeouts</a></li><li><a href=/2.9/tasks/using-debug-endpoints/>Control Plane Debug Endpoints</a></li><li><a href=/2.9/tasks/customize-install/>Customizing Linkerd's Configuration with Kustomize</a></li><li><a href=/2.9/tasks/debugging-502s/>Debugging 502s</a></li><li><a href=/2.9/tasks/debugging-your-service/>Debugging gRPC applications with request tracing</a></li><li><a href=/2.9/tasks/books/>Debugging HTTP applications with per-route metrics</a></li><li><a href=/2.9/tasks/distributed-tracing/>Distributed tracing with Linkerd</a></li><li><a href=/2.9/tasks/enabling-addons/>Enabling Add-ons</a></li><li><a href=/2.9/tasks/exporting-metrics/>Exporting Metrics</a></li><li><a href=/2.9/tasks/exposing-dashboard/>Exposing the Dashboard</a></li><li><a href=/2.9/tasks/generate-certificates/>Generating your own mTLS root certificates</a></li><li><a href=/2.9/tasks/getting-per-route-metrics/>Getting Per-Route Metrics</a></li><li><a href=/2.9/tasks/graceful-shutdown/>Graceful Pod Shutdown</a></li><li><a href=/2.9/tasks/using-ingress/>Ingress traffic</a></li><li><a href=/2.9/tasks/fault-injection/>Injecting Faults</a></li><li><a href=/2.9/tasks/install/>Installing Linkerd</a></li><li><a href=/2.9/tasks/install-helm/>Installing Linkerd with Helm</a></li><li><a href=/2.9/tasks/installing-multicluster/>Installing Multi-cluster Components</a></li><li><a href=/2.9/tasks/using-psp/>Linkerd and Pod Security Policies (PSP)</a></li><li><a href=/2.9/tasks/manually-rotating-control-plane-tls-credentials/>Manually Rotating Control Plane TLS Credentials</a></li><li><a href=/2.9/tasks/modifying-proxy-log-level/>Modifying the Proxy Log Level</a></li><li><a href=/2.9/tasks/multicluster/>Multi-cluster communication</a></li><li><a href=/2.9/tasks/replacing_expired_certificates/>Replacing expired certificates</a></li><li><a href=/2.9/tasks/rotating_webhooks_certificates/>Rotating webhooks certificates</a></li><li><a href=/2.9/tasks/securing-your-service/>Securing Your Application with mTLS</a></li><li><a href=/2.9/tasks/securing-your-cluster/>Securing Your Cluster</a></li><li><a href=/2.9/tasks/setting-up-service-profiles/>Setting Up Service Profiles</a></li><li><a href=/2.9/tasks/troubleshooting/>Troubleshooting</a></li><li><a href=/2.9/tasks/uninstall/>Uninstalling Linkerd</a></li><li><a href=/2.9/tasks/uninstall-multicluster/>Uninstalling Multicluster</a></li><li><a href=/2.9/tasks/upgrade/>Upgrading Linkerd</a></li><li><a href=/2.9/tasks/upgrade-multicluster/>Upgrading Multicluster in Linkerd 2.9</a></li><li><a href=/2.9/tasks/using-custom-domain/>Using a Custom Cluster Domain</a></li><li><a href=/2.9/tasks/using-a-private-docker-repository/>Using A Private Docker Repository</a></li><li><a href=/2.9/tasks/gitops/>Using GitOps with Linkerd with Argo CD</a></li><li><a href=/2.9/tasks/using-the-debug-container/>Using the Debug Sidecar</a></li></ul></li><li><a href=/2.9/reference/>Reference
</a><input class=toggle__input type=checkbox id=toggle-a8d66111bc52c02f61a2a68c4bc0d794>
<label class=toggle__label for=toggle-a8d66111bc52c02f61a2a68c4bc0d794><svg class="icon icon--secondary" viewBox="0 0 24 24"><path d="M8.59 16.58 13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg></label><ul class=toggle__target><li><a href=/2.9/reference/architecture/>Architecture</a></li><li><a href=/2.9/reference/cli/>CLI
</a><input class=toggle__input type=checkbox id=toggle-3f11a82cff203cfd1d728e9564196222>
<label class=toggle__label for=toggle-3f11a82cff203cfd1d728e9564196222><svg class="icon icon--secondary" viewBox="0 0 24 24"><path d="M8.59 16.58 13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg></label><ul class=toggle__target><li><a href=/2.9/reference/cli/check/>check</a></li><li><a href=/2.9/reference/cli/completion/>completion</a></li><li><a href=/2.9/reference/cli/dashboard/>dashboard</a></li><li><a href=/2.9/reference/cli/edges/>edges</a></li><li><a href=/2.9/reference/cli/endpoints/>endpoints</a></li><li><a href=/2.9/reference/cli/get/>get</a></li><li><a href=/2.9/reference/cli/inject/>inject</a></li><li><a href=/2.9/reference/cli/install/>install</a></li><li><a href=/2.9/reference/cli/install-cni/>install-cni</a></li><li><a href=/2.9/reference/cli/install-sp/>install-sp</a></li><li><a href=/2.9/reference/cli/logs/>logs</a></li><li><a href=/2.9/reference/cli/metrics/>metrics</a></li><li><a href=/2.9/reference/cli/profile/>profile</a></li><li><a href=/2.9/reference/cli/routes/>routes</a></li><li><a href=/2.9/reference/cli/stat/>stat</a></li><li><a href=/2.9/reference/cli/tap/>tap</a></li><li><a href=/2.9/reference/cli/top/>top</a></li><li><a href=/2.9/reference/cli/uninject/>uninject</a></li><li><a href=/2.9/reference/cli/upgrade/>upgrade</a></li><li><a href=/2.9/reference/cli/version/>version</a></li></ul></li><li><a href=/2.9/reference/cluster-configuration/>Cluster Configuration</a></li><li><a href=/2.9/reference/proxy-configuration/>Proxy Configuration</a></li><li><a href=/2.9/reference/proxy-log-level/>Proxy Log Level</a></li><li><a href=/2.9/reference/proxy-metrics/>Proxy Metrics</a></li><li><a href=/2.9/reference/service-profiles/>Service Profiles</a></li></ul></li></ul><ul><li><a href=/what-is-a-service-mesh/>What is a service mesh?</a></li><li><a href=/faq/>Frequently Asked Questions</a></li><li><a href=/releases/>Releases and Versions</a></li><li><a href=/design-principles/>Design Principles</a></li><li><a href=/going-to-production/>Going to Production</a></li><li><a href=/service-mesh-glossary/>Service Mesh Glossary</a></li></ul></nav><div class=docs__community><ul><li><a href=https://github.com/linkerd/linkerd2 target=_blank rel=noopener><img src=/logos/github.svg alt=GitHub class=img></a></li><li><a href=https://slack.linkerd.io target=_blank rel=noopener><img src=/logos/slack.svg alt=Slack class=img></a></li><li><a href=https://linkerd.buoyant.io target=_blank rel=noopener><img src=/logos/forum.png alt="Linkerd Forum" class=img></a></li></ul></div></div></div><div class=docs__main><div class=docs__body><div class=docs__header><h1>Automatic mTLS</h1></div><div class="docs__content prose"><p>By default, Linkerd automatically enables mutual Transport Layer Security
(mTLS) for most TCP traffic between meshed pods, by establishing and
authenticating secure, private TLS connections between Linkerd proxies.
This means that Linkerd can add authenticated, encrypted communication to your
application with very little work on your part. And because the Linkerd control
plane also runs on the data plane, this means that communication between
Linkerd&rsquo;s control plane components are also automatically secured via mTLS.</p><p>Not all traffic can be automatically mTLS&rsquo;d, but it&rsquo;s easy to <a href=../../tasks/securing-your-service/>verify which
traffic is</a>. See <a href=#caveats-and-future-work>Caveats and future
work</a> below for details on which traffic cannot
currently be automatically encrypted.</p><h2 id=how-does-it-work class=anchor>How does it work?
<a href=#how-does-it-work class=anchor__link><svg class="icon icon--primary" viewBox="0 0 24 24"><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7A5 5 0 002 12a5 5 0 005 5h4V15.1H7c-1.71.0-3.1-1.39-3.1-3.1M8 13h8V11H8v2m9-6H13V8.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1H13V17h4a5 5 0 005-5A5 5 0 0017 7z"/></svg></a></h2><p>In short, Linkerd&rsquo;s control plane issues TLS certificates to proxies, which are
scoped to the <a href=https://kubernetes.io/docs/tasks/configure-pod-container/configure-service-account/ target=_blank rel=noopener>Kubernetes
ServiceAccount</a>
of the containing pod and automatically rotated every 24 hours. The proxies use
these certificates to encrypt and authenticate TCP traffic to other
proxies.</p><p>To do this, Linkerd maintains a set of credentials in the cluster: a trust
anchor, and an issuer certificate and private key. These credentials are
generated by Linkerd itself during install time, or optionally provided by an
external source, e.g. <a href=https://vaultproject.io target=_blank rel=noopener>Vault</a> or
<a href=https://github.com/jetstack/cert-manager target=_blank rel=noopener>cert-manager</a>. The issuer
certificate and private key are placed into a <a href=https://kubernetes.io/docs/concepts/configuration/secret/ target=_blank rel=noopener>Kubernetes
Secret</a>. By default,
the Secret is placed in the <code>linkerd</code> namespace and can only be read by the
service account used by the <a href=../../reference/architecture/>Linkerd control
plane</a>&rsquo;s <code>identity</code> component.</p><p>On the data plane side, each proxy is passed the trust anchor in an environment
variable. At startup, the proxy generates a private key, stored in a <a href=https://kubernetes.io/docs/concepts/storage/volumes/#emptydir target=_blank rel=noopener>tmpfs
emptyDir</a> which
stays in memory and never leaves the pod. The proxy connects to the control
plane&rsquo;s <code>identity</code> component, validating the connection to <code>identity</code> with the
trust anchor, and issues a <a href=https://en.wikipedia.org/wiki/Certificate_signing_request target=_blank rel=noopener>certificate signing request
(CSR)</a>. The CSR
contains an initial certificate with identity set to the pod&rsquo;s <a href=https://kubernetes.io/docs/tasks/configure-pod-container/configure-service-account/ target=_blank rel=noopener>Kubernetes
ServiceAccount</a>,
and the actual service account token, so that <code>identity</code> can validate that the
CSR is valid. After validation, the signed trust bundle is returned to the
proxy, which can use it as both a client and server certificate. These
certificates are scoped to 24 hours and dynamically refreshed using the
same mechanism.</p><p>When a proxy injected into a pod receives an outbound connection from the
application container, it performs service discovery by looking up that IP
address with the Linkerd control plane. When the destination is in the
Kubernetes cluster, the control plane provides the proxy with the destination&rsquo;s
endpoint addresses, along with metadata. When an identity name is included in
this metadata, this indicates to the proxy that it can initiate mutual TLS. When
the proxy connects to the destination, it initiates a TLS handshake, verifying
that the destination proxy&rsquo;s certificate was signed for the expected identity
name.</p><h2 id=maintenance class=anchor>Maintenance
<a href=#maintenance class=anchor__link><svg class="icon icon--primary" viewBox="0 0 24 24"><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7A5 5 0 002 12a5 5 0 005 5h4V15.1H7c-1.71.0-3.1-1.39-3.1-3.1M8 13h8V11H8v2m9-6H13V8.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1H13V17h4a5 5 0 005-5A5 5 0 0017 7z"/></svg></a></h2><p>The trust anchor generated by <code>linkerd install</code> expires after 365 days, and
must be <a href=../../tasks/manually-rotating-control-plane-tls-credentials/>manually
rotated</a>.
Alternatively you can <a href=../../tasks/generate-certificates/>provide the trust anchor
yourself</a> and control the expiration date.</p><p>By default, the issuer certificate and key are not automatically rotated. You
can <a href=../../tasks/automatically-rotating-control-plane-tls-credentials/>set up automatic rotation with
<code>cert-manager</code></a>.</p><h2 id=caveats-and-future-work class=anchor>Caveats and future work
<a href=#caveats-and-future-work class=anchor__link><svg class="icon icon--primary" viewBox="0 0 24 24"><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7A5 5 0 002 12a5 5 0 005 5h4V15.1H7c-1.71.0-3.1-1.39-3.1-3.1M8 13h8V11H8v2m9-6H13V8.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1H13V17h4a5 5 0 005-5A5 5 0 0017 7z"/></svg></a></h2><p>There are a few known gaps in Linkerd&rsquo;s ability to automatically encrypt and
authenticate all communication in the cluster. These gaps will be fixed in
future releases:</p><ul><li><p>Linkerd does not currently <em>enforce</em> mTLS. Any unencrypted requests inside
the mesh will be opportunistically upgraded to mTLS. Any requests originating
from inside or outside the mesh will not be automatically mTLS&rsquo;d by Linkerd.
This will be addressed in a future Linkerd release, likely as an opt-in
behavior as it may break some existing applications.</p></li><li><p>Ideally, the ServiceAccount token that Linkerd uses would not be shared with
other potential uses of that token. In future Kubernetes releases, Kubernetes
will support audience/time-bound ServiceAccount tokens, and Linkerd will use
those instead.</p></li></ul></div></div></div></div></div></main><footer class=main-footer><div class=main-footer__top><div class="main-footer__container container"><div class=main-footer__info><p><img src=/logos/linkerd.png alt=Linkerd></p><p>Linkerd was originally created by <a href=https://buoyant.io/ target=_blank rel=noopener>Buoyant</a></p><p>View <a href=https://github.com/linkerd/linkerd/wiki/Linkerd-code-of-conduct target=_blank rel=noopener>Code of Conduct</a></p></div><div class=main-footer__links><div class=main-footer__community><h4>Community</h4><ul><li><a href=https://github.com/linkerd/linkerd2 target=_blank rel=noopener>GitHub</a></li><li><a href=https://slack.linkerd.io target=_blank rel=noopener>Slack</a></li><li><a href=https://linkerd.buoyant.io target=_blank rel=noopener>Linkerd Forum</a></li></ul></div><div class=main-footer__follow><h4>Follow</h4><ul><li><a href=https://www.linkedin.com/company/linkerd/ target=_blank rel=noopener>Linkedin</a></li><li><a href=https://www.youtube.com/buoyantio target=_blank rel=noopener>YouTube</a></li><li><a href=https://twitter.com/linkerd target=_blank rel=noopener>Twitter</a></li></ul></div></div></div></div><div class=main-footer__bottom><div class="main-footer__container container"><p><a href=https://github.com/linkerd/website/tree/main/linkerd.io/content target=_blank rel=noopener>Edit This Site</a></p><p>Copyright © 2024 Linkerd Authors. All rights reserved.</p></div></div></footer></body></html>