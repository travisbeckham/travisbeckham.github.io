<!doctype html><html lang=en><head><meta charset=utf-8><title>Announcing automated multi-cluster failover for Kubernetes | Linkerd</title>
<link rel="shortcut icon" href=/favicon.png><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Today we&rsquo;re happy to announce the release of new automated failover
functionality for Linkerd. This feature gives Linkerd the ability to
automatically redirect all traffic from a failing or inaccessible service to one
or more replicas of that service—including replicas on other clusters. And, as
you&rsquo;d expect, any redirected traffic maintains all of Linkerd&rsquo;s guarantees of
security, reliability, and transparency to the application, even across clusters
boundaries separated by the open Internet."><meta property="og:url" content="https://travisbeckham.github.io/2022/03/09/announcing-automated-multi-cluster-failover-for-kubernetes/"><meta property="og:site_name" content="Linkerd"><meta property="og:title" content="Announcing automated multi-cluster failover for Kubernetes"><meta property="og:description" content="Today we’re happy to announce the release of new automated failover functionality for Linkerd. This feature gives Linkerd the ability to automatically redirect all traffic from a failing or inaccessible service to one or more replicas of that service—including replicas on other clusters. And, as you’d expect, any redirected traffic maintains all of Linkerd’s guarantees of security, reliability, and transparency to the application, even across clusters boundaries separated by the open Internet."><meta property="og:locale" content="en_us"><meta property="og:type" content="article"><meta property="article:section" content="blog"><meta property="article:published_time" content="2022-03-09T00:00:00+00:00"><meta property="article:modified_time" content="2022-03-09T00:00:00+00:00"><meta property="og:image" content="https://travisbeckham.github.io/2022/03/09/announcing-automated-multi-cluster-failover-for-kubernetes/cover.jpg"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://travisbeckham.github.io/2022/03/09/announcing-automated-multi-cluster-failover-for-kubernetes/cover.jpg"><meta name=twitter:title content="Announcing automated multi-cluster failover for Kubernetes"><meta name=twitter:description content="Today we’re happy to announce the release of new automated failover functionality for Linkerd. This feature gives Linkerd the ability to automatically redirect all traffic from a failing or inaccessible service to one or more replicas of that service—including replicas on other clusters. And, as you’d expect, any redirected traffic maintains all of Linkerd’s guarantees of security, reliability, and transparency to the application, even across clusters boundaries separated by the open Internet."><meta name=twitter:site content="@Linkerd"><link rel=canonical href=https://travisbeckham.github.io/2022/03/09/announcing-automated-multi-cluster-failover-for-kubernetes/><link rel=stylesheet href=/css/main.css><script src=/js/main.js></script><script async defer src=https://buttons.github.io/buttons.js></script><script type=application/ld+json>{"@context":"https://schema.org","@type":"Article","author":"Alejandro Pedraza","datePublished":"2022-03-09T00:00:00Z","dateModified":"2022-03-09T00:00:00Z","headline":"Announcing automated multi-cluster failover for Kubernetes","image":"https://travisbeckham.github.io/2022/03/09/announcing-automated-multi-cluster-failover-for-kubernetes/cover.jpg","publisher":{"@type":"Organization","name":"linkerd.io","logo":{"@type":"ImageObject","url":"https://travisbeckham.github.io/logos/linkerd.png","width":472,"height":100}}}</script></head><body><header class=main-header><div class=main-header__container><div class=main-header__logo><a href=/><img src=/logos/linkerd.png alt=Linkerd></a></div><input class=main-header__toggle-checkbox type=checkbox id=main-header-toggle>
<label class=main-header__toggle for=main-header-toggle><span class=main-header__toggle-icon><span class=main-header__toggle-icon--open><svg class="icon icon--primary" viewBox="0 0 24 24"><path d="M3 6H21V8H3V6m0 5H21v2H3V11m0 5H21v2H3V16z"/></svg>
</span><span class=main-header__toggle-icon--close><svg class="icon icon--primary" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg></span></span></label><div class=main-header__nav><nav class=main-nav><ul class=main-nav__menu><li><a href=/docs>Docs</a></li><li><a href=#>Community<svg class="icon icon--primary" viewBox="0 0 24 24"><path d="M7.41 8.58 12 13.17l4.59-4.59L18 10l-6 6-6-6L7.41 8.58z"/></svg></a><ul><li><a href=/community/get-involved/>Get Involved</a></li><li><a href=/community/adopters/>Adopters</a></li><li><a href=/community/ambassadors/>Linkerd Ambassadors</a></li><li><a href=https://linkerd.buoyant.io target=_blank rel=noopener>Buoyant's Linkerd Forum</a></li></ul></li><li class=main-nav__menu--selected><a href=/blog/>Blog</a></li><li><a href=/faq/>FAQ</a></li><li><a href=/enterprise/>Enterprise</a></li></ul><div class=main-nav__search><form action=/search method=get><div class="search-input search-input--sm"><svg class="icon" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5.0 0116 9.5c0 1.61-.59 3.09-1.56 4.23L14.71 14H15.5l5 5L19 20.5l-5-5V14.71L13.73 14.44C12.59 15.41 11.11 16 9.5 16A6.5 6.5.0 013 9.5 6.5 6.5.0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
<input type=text name=q placeholder=Search></div></form></div><div class=main-nav__github><a class=github-button href=https://github.com/linkerd/linkerd2 data-icon=octicon-star data-size=large data-show-count=true aria-label="Star linkerd/linkerd2 on GitHub">Star</a></div><div class=main-nav__forum><a href=https://linkerd.buoyant.io class="button button--primary button--sm" target=_blank rel=noopener>Join Forum</a></div></nav></div></div></header><div class=main-announcement><strong>Oct 23, 2024</strong> New blog post: Towards a Sustainable Service Mesh.
<a href=/2024/10/23/making-linkerd-sustainable/ class=main-announcement__link>Read the post</a></div><main class=main-content><div class="blog blog--single"><div class="blog__container container"><div class=blog-post><div class=blog-post__header><h1>Announcing automated multi-cluster failover for Kubernetes</h1><div class=blog-post-meta><div class=blog-post-meta__media><img src=/authors/alejanadro-pedraza_hu5167215430795483677.jpg alt="Alejandro Pedraza" class="img img--48 img--round"></div><div class=blog-post-meta__body><div class=blog-post-meta__name>Alejandro Pedraza</div><div class=blog-post-meta__date>Mar 9, 2022 • 3 min read</div></div></div></div><div class=blog-post__cover><img src=/2022/03/09/announcing-automated-multi-cluster-failover-for-kubernetes/cover.jpg alt=Cover class="img img--fill img--rounded"></div><div class="blog-post__content prose"><p>Today we&rsquo;re happy to announce the release of new <em>automated failover</em>
functionality for Linkerd. This feature gives Linkerd the ability to
automatically redirect all traffic from a failing or inaccessible service to one
or more replicas of that service—including replicas on other clusters. And, as
you&rsquo;d expect, any redirected traffic maintains all of Linkerd&rsquo;s guarantees of
security, reliability, and transparency to the application, even across clusters
boundaries separated by the open Internet.</p><p>Implemented as a Kubernetes operator that can be added to an existing Linkerd
deployment, the failover strategy can be applied to a single cluster but is
particularly useful for multi-cluster deployments. Linkerd already provides
<a href=https://linkerd.io/2/features/multicluster/ target=_blank rel=noopener>powerful cross-cluster communication
capabilities</a> that work with any
cluster topology, including multi-cloud and hybrid cloud; are completely
transparent to the application; are zero-trust compatible; and do not introduce
any single points of failure (SPOF) to the system. To this feature set, the new
failover operator now adds <em>automation</em>, allowing Kubernetes users to configure
failure conditions under which Linkerd will automatically shift traffic between
one or more services.</p><p>In true Linkerd fashion, this new functionality introduces a minimum of new
machinery, instead building on top of existing Kubernetes and service mesh
primitives such as health probes and <a href=https://smi-spec.io/ target=_blank rel=noopener>Service Mesh
Interface</a> TrafficSplits. This new operator rounds out
Linkerd&rsquo;s existing reliability features, providing a complete solution for
ultra-high-reliability deployments that covers:</p><ul><li>Failure of individual nodes: handled via
<a href=https://linkerd.io/2/features/retries-and-timeouts/ target=_blank rel=noopener>retries</a> and <a href=https://linkerd.io/2/features/load-balancing/ target=_blank rel=noopener>request
balancing</a></li><li>Failures due to bad code changes: (handled via <a href=https://linkerd.io/2/features/traffic-split/ target=_blank rel=noopener>canary
deployments</a>)</li><li>Failures due to service unavailability in general: handled with the failover operator</li><li>Failures due to whole-cluster outages: handed with the failover operator</li></ul><h2 id=getting-started>Getting started</h2><p>The operator is available as a standalone project, but requires the latest
<a href=https://linkerd.io/edge/ target=_blank rel=noopener>Linkerd edge release</a> release to work. The operator
will also work with in the upcoming 2.11.2 point release, expected within the
next few weeks.</p><p>Want to give it a try right now? Head over to the <a href=https://github.com/linkerd/linkerd-failover target=_blank rel=noopener>linkerd-failover
repo</a> and follow the instructions
there, or install via Helm:</p><div class=highlight><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#8b949e;font-style:italic># Add the linkerd-edge Helm repo if you haven&#39;t already</span>
</span></span><span style=display:flex><span>helm repo add linkerd-edge https://helm.linkerd.io/edge
</span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic># And the linkerd-smi extension</span>
</span></span><span style=display:flex><span>helm repo add linkerd-smi https://linkerd.github.io/linkerd-smi
</span></span><span style=display:flex><span>helm repo up
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic># Install linkerd-smi and linkerd-failover</span>
</span></span><span style=display:flex><span>helm install linkerd-smi -n linkerd-smi --create-namespace linkerd-smi/linkerd-smi
</span></span><span style=display:flex><span>helm install linkerd-failover -n linkerd-failover --create-namespace --devel linkerd-edge/linkerd-failover
</span></span></code></pre></div><p>Then, configure service failover by applying the
<code>failover.linkerd.io/controlled-by: linkerd-failover</code> label to an existing
TrafficSplit. For example:</p><div class=highlight><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#7ee787>apiVersion</span>:<span style=color:#6e7681> </span><span style=color:#a5d6ff>split.smi-spec.io/v1alpha2</span><span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681></span><span style=color:#7ee787>kind</span>:<span style=color:#6e7681> </span><span style=color:#a5d6ff>TrafficSplit</span><span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681></span><span style=color:#7ee787>metadata</span>:<span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681></span><span style=color:#7ee787>name</span>:<span style=color:#6e7681> </span><span style=color:#a5d6ff>sample-svc</span><span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681></span><span style=color:#7ee787>annotations</span>:<span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681>  </span><span style=color:#7ee787>failover.linkerd.io/primary-service</span>:<span style=color:#6e7681> </span><span style=color:#a5d6ff>sample-svc</span><span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681></span><span style=color:#7ee787>labels</span>:<span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681>  </span><span style=color:#7ee787>failover.linkerd.io/controlled-by</span>:<span style=color:#6e7681> </span><span style=color:#a5d6ff>linkerd-failover</span><span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681></span><span style=color:#7ee787>spec</span>:<span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681></span><span style=color:#7ee787>service</span>:<span style=color:#6e7681> </span><span style=color:#a5d6ff>sample-svc</span><span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681></span><span style=color:#7ee787>backends</span>:<span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681>  </span>- <span style=color:#7ee787>service</span>:<span style=color:#6e7681> </span><span style=color:#a5d6ff>sample-svc</span><span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681>    </span><span style=color:#7ee787>weight</span>:<span style=color:#6e7681> </span><span style=color:#a5d6ff>1</span><span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681>  </span>- <span style=color:#7ee787>service</span>:<span style=color:#6e7681> </span><span style=color:#a5d6ff>sample-svc-remote</span><span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681>    </span><span style=color:#7ee787>weight</span>:<span style=color:#6e7681> </span><span style=color:#a5d6ff>0</span><span style=color:#6e7681>
</span></span></span></code></pre></div><p>In this example, traffic to <code>sample-svc</code> service will automatically failover
from the local cluster to the replica in the event of total health check
failure. It&rsquo;s as simple as that!</p><p>We&rsquo;d love your feedback on this exciting new feature for Linkerd. The initial
operator implementation covers the basics, but there&rsquo;s lots more to come. Check
out our <a href=https://github.com/linkerd/linkerd-failover/issues target=_blank rel=noopener>initial roadmap</a>
(soon to be moved to the main <a href=https://github.com/linkerd/linkerd2 target=_blank rel=noopener>linkerd2
repo</a>) and give us your feature requests,
bug reports, and any other feedback!</p><h2 id=linkerd-is-for-everyone>Linkerd is for everyone</h2><p>Linkerd is a <a href=/2021/07/28/announcing-cncf-graduation/>graduated project</a> of the
<a href=https://cncf.io/ target=_blank rel=noopener>Cloud Native Computing Foundation</a>. Linkerd is <a href=https://linkerd.io/2019/10/03/linkerds-commitment-to-open-governance/ target=_blank rel=noopener>committed to
open
governance.</a>
If you have feature requests, questions, or comments, we&rsquo;d love to have you join
our rapidly-growing community! Linkerd is hosted on
<a href=https://github.com/linkerd/ target=_blank rel=noopener>GitHub</a>, and we have a thriving community on
<a href=https://slack.linkerd.io/ target=_blank rel=noopener>Slack</a>, <a href=https://twitter.com/linkerd target=_blank rel=noopener>Twitter</a>, and
the <a href=https://linkerd.io/2/get-involved/ target=_blank rel=noopener>mailing lists</a>. Come and join the fun!</p><p>(<em>Photo by <a href="https://unsplash.com/@raymondo600?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" target=_blank rel=noopener>Ray Harrington</a>
on
<a href="https://unsplash.com/?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" target=_blank rel=noopener>Unsplash</a>.</em>)</p></div></div><div class=blog-post-related><h2>Suggested Blog Posts</h2><div class=blog-post-related__pages><div class="card card--horz card--center"><div class=card__media><img src=/2022/02/16/linkerd-istio-adoption/linkerd-vs-istio-2021-survey-count_hu16593164902184085476.jpg alt="Linkerd vs istio 2021 survey count hu16593164902184085476" class="img img--128 img--rounded"></div><div class=card__body><div class=card__header><h4><a href=/2022/02/16/linkerd-istio-adoption/>Linkerd surpasses Istio adoption in Europe and North America with 118% growth
in 2021</a></h4><div class=blog-post-meta><div class=blog-post-meta__date>Feb 16, 2022 • 3 min read</div></div></div></div></div><div class="card card--horz card--center"><div class=card__media><img src=/2021/05/27/linkerd-vs-istio-benchmarks/latency-2000rps.png alt="Latency 2000rps" class="img img--128 img--rounded"></div><div class=card__body><div class=card__header><h4><a href=/2021/11/29/linkerd-vs-istio-benchmarks-2021/>Benchmarking Linkerd and Istio: 2021 Redux</a></h4><div class=blog-post-meta><div class=blog-post-meta__date>Nov 29, 2021 • 11 min read</div></div></div></div></div><div class="card card--horz card--center"><div class=card__media><img src=/2021/10/28/announcing-octobers-linkerd-hero/cover_hu112989909601354383.jpg alt="Cover hu112989909601354383" class="img img--128 img--rounded"></div><div class=card__body><div class=card__header><h4><a href=/2021/10/28/announcing-octobers-linkerd-hero/>Announcing October's Linkerd hero</a></h4><div class=blog-post-meta><div class=blog-post-meta__date>Oct 28, 2021 • 2 min read</div></div></div></div></div><div class="card card--horz card--center"><div class=card__media><img src=/2021/09/30/announcing-linkerd-2.11/cover_hu12557372274273409166.jpg alt="Cover hu12557372274273409166" class="img img--128 img--rounded"></div><div class=card__body><div class=card__header><h4><a href=/2021/09/30/announcing-linkerd-2.11/>Announcing Linkerd 2.11: Policy, gRPC retries, performance improvements, and
more!</a></h4><div class=blog-post-meta><div class=blog-post-meta__date>Sep 30, 2021 • 5 min read</div></div></div></div></div></div></div></div></div></main><footer class=main-footer><div class=main-footer__top><div class="main-footer__container container"><div class=main-footer__info><p><img src=/logos/linkerd.png alt=Linkerd></p><p>Linkerd was originally created by <a href=https://buoyant.io/ target=_blank rel=noopener>Buoyant</a></p><p>View <a href=https://github.com/linkerd/linkerd/wiki/Linkerd-code-of-conduct target=_blank rel=noopener>Code of Conduct</a></p></div><div class=main-footer__links><div class=main-footer__community><h4>Community</h4><ul><li><a href=https://github.com/linkerd/linkerd2 target=_blank rel=noopener>GitHub</a></li><li><a href=https://slack.linkerd.io target=_blank rel=noopener>Slack</a></li><li><a href=https://linkerd.buoyant.io target=_blank rel=noopener>Linkerd Forum</a></li></ul></div><div class=main-footer__follow><h4>Follow</h4><ul><li><a href=https://www.linkedin.com/company/linkerd/ target=_blank rel=noopener>Linkedin</a></li><li><a href=https://www.youtube.com/buoyantio target=_blank rel=noopener>YouTube</a></li><li><a href=https://twitter.com/linkerd target=_blank rel=noopener>Twitter</a></li></ul></div></div></div></div><div class=main-footer__bottom><div class="main-footer__container container"><p><a href=https://github.com/linkerd/website/tree/main/linkerd.io/content target=_blank rel=noopener>Edit This Site</a></p><p>Copyright © 2024 Linkerd Authors. All rights reserved.</p></div></div></footer></body></html>