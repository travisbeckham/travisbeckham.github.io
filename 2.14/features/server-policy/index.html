<!doctype html><html lang=en><head><meta charset=utf-8><title>Authorization Policy | Linkerd</title>
<link rel="shortcut icon" href=/favicon.png><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Linkerd can restrict which types of traffic are allowed between meshed services."><meta property="og:url" content="https://travisbeckham.github.io/2.14/features/server-policy/"><meta property="og:site_name" content="Linkerd"><meta property="og:title" content="Authorization Policy"><meta property="og:description" content="Linkerd can restrict which types of traffic are allowed between meshed services."><meta property="og:locale" content="en_us"><meta property="og:type" content="article"><meta property="article:section" content="2.14"><meta property="og:image" content="https://travisbeckham.github.io/logos/linkerd.png"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://travisbeckham.github.io/logos/linkerd.png"><meta name=twitter:title content="Authorization Policy"><meta name=twitter:description content="Linkerd can restrict which types of traffic are allowed between meshed services."><meta name=twitter:site content="@Linkerd"><link rel=canonical href=https://travisbeckham.github.io/2.14/features/server-policy/><link rel=stylesheet href=/css/main.css><script src=/js/main.js></script><script async defer src=https://buttons.github.io/buttons.js></script></head><body><header class=main-header><div class=main-header__container><div class=main-header__logo><a href=/><img src=/logos/linkerd.png alt=Linkerd></a></div><input class=main-header__toggle-checkbox type=checkbox id=main-header-toggle>
<label class=main-header__toggle for=main-header-toggle><span class=main-header__toggle-icon><span class=main-header__toggle-icon--open><svg class="icon icon--primary" viewBox="0 0 24 24"><path d="M3 6H21V8H3V6m0 5H21v2H3V11m0 5H21v2H3V16z"/></svg>
</span><span class=main-header__toggle-icon--close><svg class="icon icon--primary" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg></span></span></label><div class=main-header__nav><nav class=main-nav><ul class=main-nav__menu><li class=main-nav__menu--selected><a href=/docs>Docs</a></li><li><a href=#>Community<svg class="icon icon--primary" viewBox="0 0 24 24"><path d="M7.41 8.58 12 13.17l4.59-4.59L18 10l-6 6-6-6L7.41 8.58z"/></svg></a><ul><li><a href=/community/get-involved/>Get Involved</a></li><li><a href=/community/adopters/>Adopters</a></li><li><a href=/community/ambassadors/>Linkerd Ambassadors</a></li><li><a href=https://linkerd.buoyant.io target=_blank rel=noopener>Buoyant's Linkerd Forum</a></li></ul></li><li><a href=/blog/>Blog</a></li><li><a href=/faq/>FAQ</a></li><li><a href=/enterprise/>Enterprise</a></li></ul><div class=main-nav__search><form action=/search method=get><div class="search-input search-input--sm"><svg class="icon" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5.0 0116 9.5c0 1.61-.59 3.09-1.56 4.23L14.71 14H15.5l5 5L19 20.5l-5-5V14.71L13.73 14.44C12.59 15.41 11.11 16 9.5 16A6.5 6.5.0 013 9.5 6.5 6.5.0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
<input type=text name=q placeholder=Search></div></form></div><div class=main-nav__github><a class=github-button href=https://github.com/linkerd/linkerd2 data-icon=octicon-star data-size=large data-show-count=true aria-label="Star linkerd/linkerd2 on GitHub">Star</a></div><div class=main-nav__forum><a href=https://linkerd.buoyant.io class="button button--primary button--sm" target=_blank rel=noopener>Join Forum</a></div></nav></div></div></header><div class=main-announcement><strong>Oct 23, 2024</strong> New blog post: Towards a Sustainable Service Mesh.
<a href=/2024/10/23/making-linkerd-sustainable/ class=main-announcement__link>Read the post</a></div><main class=main-content><div class="alert alert--warning alert--condensed alert--center docs__deprecated-alert"><div class=alert__content>You are viewing docs for an older version of Linkerd.
<a href=/2.16/>View the latest docs</a>.</div></div><div class=docs><div class=docs__container><div class=docs__sidebar><div class=docs__nav><div class=docs__versions><select onchange="window.location.href=this.value"><option value=/2-edge/>Linkerd edge</option><option value=/2.16/>Linkerd 2.16</option><option value=/2.15/>Linkerd 2.15</option><option value=/2.14/ selected>Linkerd 2.14</option><option value=/2.13/>Linkerd 2.13</option><option value=/2.12/>Linkerd 2.12</option><option value=/2.11/>Linkerd 2.11</option><option value=/2.10/>Linkerd 2.10</option></select></div><nav><ul><li><a href=/2.14/overview/>Overview</a></li><li><a href=/2.14/getting-started/>Getting Started</a></li><li class=docs__nav--selected><a href=/2.14/features/>Features
</a><input class=toggle__input type=checkbox id=toggle-ea3747e68e61b73d22c1d6ba39092b05 checked>
<label class=toggle__label for=toggle-ea3747e68e61b73d22c1d6ba39092b05><svg class="icon icon--secondary" viewBox="0 0 24 24"><path d="M8.59 16.58 13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg></label><ul class=toggle__target><li><a href=/2.14/features/http-grpc/>HTTP, HTTP/2, and gRPC Proxying</a></li><li><a href=/2.14/features/protocol-detection/>TCP Proxying and Protocol Detection</a></li><li><a href=/2.14/features/retries-and-timeouts/>Retries and Timeouts</a></li><li><a href=/2.14/features/automatic-mtls/>Automatic mTLS</a></li><li><a href=/2.14/features/ingress/>Ingress</a></li><li><a href=/2.14/features/telemetry/>Telemetry and Monitoring</a></li><li><a href=/2.14/features/load-balancing/>Load Balancing</a></li><li class=docs__nav--selected><a href=/2.14/features/server-policy/>Authorization Policy</a></li><li><a href=/2.14/features/proxy-injection/>Automatic Proxy Injection</a></li><li><a href=/2.14/features/cni/>CNI Plugin</a></li><li><a href=/2.14/features/dashboard/>Dashboard and on-cluster metrics stack</a></li><li><a href=/2.14/features/distributed-tracing/>Distributed Tracing</a></li><li><a href=/2.14/features/request-routing/>Dynamic Request Routing</a></li><li><a href=/2.14/features/fault-injection/>Fault Injection</a></li><li><a href=/2.14/features/ha/>High Availability</a></li><li><a href=/2.14/features/access-logging/>HTTP Access Logging</a></li><li><a href=/2.14/features/httproute/>HTTPRoutes</a></li><li><a href=/2.14/features/nft/>Iptables-nft Support</a></li><li><a href=/2.14/features/multicluster/>Multi-cluster communication</a></li><li><a href=/2.14/features/service-profiles/>Service Profiles</a></li><li><a href=/2.14/features/traffic-split/>Traffic Split (canaries, blue/green deploys)</a></li></ul></li><li><a href=/2.14/tasks/>Tasks
</a><input class=toggle__input type=checkbox id=toggle-2a72366790e7eb356e6377b5da0dbc49>
<label class=toggle__label for=toggle-2a72366790e7eb356e6377b5da0dbc49><svg class="icon icon--secondary" viewBox="0 0 24 24"><path d="M8.59 16.58 13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg></label><ul class=toggle__target><li><a href=/2.14/tasks/adding-your-service/>Adding your services to Linkerd</a></li><li><a href=/2.14/tasks/automatic-failover/>Automatic Multicluster Failover</a></li><li><a href=/2.14/tasks/automatically-rotating-control-plane-tls-credentials/>Automatically Rotating Control Plane TLS Credentials</a></li><li><a href=/2.14/tasks/automatically-rotating-webhook-tls-credentials/>Automatically Rotating Webhook TLS Credentials</a></li><li><a href=/2.14/tasks/external-prometheus/>Bringing your own Prometheus</a></li><li><a href=/2.14/tasks/circuit-breakers/>Circuit Breakers</a></li><li><a href=/2.14/tasks/configuring-dynamic-request-routing/>Configuring Dynamic Request Routing</a></li><li><a href=/2.14/tasks/configuring-per-route-policy/>Configuring Per-Route Authorization Policy</a></li><li><a href=/2.14/tasks/configuring-proxy-concurrency/>Configuring Proxy Concurrency</a></li><li><a href=/2.14/tasks/configuring-proxy-discovery-cache/>Configuring Proxy Discovery Cache</a></li><li><a href=/2.14/tasks/configuring-retries/>Configuring Retries</a></li><li><a href=/2.14/tasks/configuring-timeouts/>Configuring Timeouts</a></li><li><a href=/2.14/tasks/using-debug-endpoints/>Control Plane Debug Endpoints</a></li><li><a href=/2.14/tasks/customize-install/>Customizing Linkerd's Configuration with Kustomize</a></li><li><a href=/2.14/tasks/debugging-502s/>Debugging 502s</a></li><li><a href=/2.14/tasks/debugging-your-service/>Debugging gRPC applications with request tracing</a></li><li><a href=/2.14/tasks/books/>Debugging HTTP applications with per-route metrics</a></li><li><a href=/2.14/tasks/distributed-tracing/>Distributed tracing with Linkerd</a></li><li><a href=/2.14/tasks/exporting-metrics/>Exporting Metrics</a></li><li><a href=/2.14/tasks/exposing-dashboard/>Exposing the Dashboard</a></li><li><a href=/2.14/tasks/generate-certificates/>Generating your own mTLS root certificates</a></li><li><a href=/2.14/tasks/getting-per-route-metrics/>Getting Per-Route Metrics</a></li><li><a href=/2.14/tasks/linkerd-smi/>Getting started with Linkerd SMI extension</a></li><li><a href=/2.14/tasks/graceful-shutdown/>Graceful Pod Shutdown</a></li><li><a href=/2.14/tasks/grafana/>Grafana</a></li><li><a href=/2.14/tasks/using-ingress/>Handling ingress traffic</a></li><li><a href=/2.14/tasks/fault-injection/>Injecting Faults</a></li><li><a href=/2.14/tasks/install/>Installing Linkerd</a></li><li><a href=/2.14/tasks/install-helm/>Installing Linkerd with Helm</a></li><li><a href=/2.14/tasks/installing-multicluster/>Installing Multi-cluster Components</a></li><li><a href=/2.14/tasks/using-psp/>Linkerd and Pod Security Policies (PSP)</a></li><li><a href=/2.14/tasks/manually-rotating-control-plane-tls-credentials/>Manually Rotating Control Plane TLS Credentials</a></li><li><a href=/2.14/tasks/modifying-proxy-log-level/>Modifying the Proxy Log Level</a></li><li><a href=/2.14/tasks/multicluster/>Multi-cluster communication</a></li><li><a href=/2.14/tasks/multicluster-using-statefulsets/>Multi-cluster communication with StatefulSets</a></li><li><a href=/2.14/tasks/pod-to-pod-multicluster/>Pod-to-Pod Multi-cluster communication</a></li><li><a href=/2.14/tasks/flagger/>Progressive Delivery</a></li><li><a href=/2.14/tasks/replacing_expired_certificates/>Replacing expired certificates</a></li><li><a href=/2.14/tasks/restricting-access/>Restricting Access To Services</a></li><li><a href=/2.14/tasks/rotating_webhooks_certificates/>Rotating webhooks certificates</a></li><li><a href=/2.14/tasks/securing-linkerd-tap/>Securing Linkerd Tap</a></li><li><a href=/2.14/tasks/setting-up-service-profiles/>Setting Up Service Profiles</a></li><li><a href=/2.14/tasks/traffic-shifting/>Traffic Shifting</a></li><li><a href=/2.14/tasks/troubleshooting/>Troubleshooting</a></li><li><a href=/2.14/tasks/uninstall/>Uninstalling Linkerd</a></li><li><a href=/2.14/tasks/uninstall-multicluster/>Uninstalling Multicluster</a></li><li><a href=/2.14/tasks/upgrade/>Upgrading Linkerd</a></li><li><a href=/2.14/tasks/using-custom-domain/>Using a Custom Cluster Domain</a></li><li><a href=/2.14/tasks/using-a-private-docker-repository/>Using A Private Docker Repository</a></li><li><a href=/2.14/tasks/extensions/>Using extensions</a></li><li><a href=/2.14/tasks/gitops/>Using GitOps with Linkerd with Argo CD</a></li><li><a href=/2.14/tasks/using-the-debug-container/>Using the Debug Sidecar</a></li><li><a href=/2.14/tasks/validating-your-traffic/>Validating your mTLS traffic</a></li></ul></li><li><a href=/2.14/reference/>Reference
</a><input class=toggle__input type=checkbox id=toggle-4b6137c2c4851e7b42ef195bf0fca52a>
<label class=toggle__label for=toggle-4b6137c2c4851e7b42ef195bf0fca52a><svg class="icon icon--secondary" viewBox="0 0 24 24"><path d="M8.59 16.58 13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg></label><ul class=toggle__target><li><a href=/2.14/reference/architecture/>Architecture</a></li><li><a href=/2.14/reference/authorization-policy/>Authorization Policy</a></li><li><a href=/2.14/reference/circuit-breaking/>Circuit Breaking</a></li><li><a href=/2.14/reference/cli/>CLI
</a><input class=toggle__input type=checkbox id=toggle-d1b1ff7f2e08491aa304402b092e2b75>
<label class=toggle__label for=toggle-d1b1ff7f2e08491aa304402b092e2b75><svg class="icon icon--secondary" viewBox="0 0 24 24"><path d="M8.59 16.58 13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg></label><ul class=toggle__target><li><a href=/2.14/reference/cli/authz/>authz</a></li><li><a href=/2.14/reference/cli/check/>check</a></li><li><a href=/2.14/reference/cli/completion/>completion</a></li><li><a href=/2.14/reference/cli/diagnostics/>diagnostics</a></li><li><a href=/2.14/reference/cli/identity/>identity</a></li><li><a href=/2.14/reference/cli/inject/>inject</a></li><li><a href=/2.14/reference/cli/install/>install</a></li><li><a href=/2.14/reference/cli/install-cni/>install-cni</a></li><li><a href=/2.14/reference/cli/jaeger/>jaeger</a></li><li><a href=/2.14/reference/cli/multicluster/>multicluster</a></li><li><a href=/2.14/reference/cli/profile/>profile</a></li><li><a href=/2.14/reference/cli/prune/>prune</a></li><li><a href=/2.14/reference/cli/uninject/>uninject</a></li><li><a href=/2.14/reference/cli/uninstall/>uninstall</a></li><li><a href=/2.14/reference/cli/upgrade/>upgrade</a></li><li><a href=/2.14/reference/cli/version/>version</a></li><li><a href=/2.14/reference/cli/viz/>viz</a></li></ul></li><li><a href=/2.14/reference/cluster-configuration/>Cluster Configuration</a></li><li><a href=/2.14/reference/extension-list/>Extensions List</a></li><li><a href=/2.14/reference/helm-chart-version-matrix/>Helm Chart Version Matrix</a></li><li><a href=/2.14/reference/httproute/>HTTPRoute</a></li><li><a href=/2.14/reference/iptables/>IPTables Reference</a></li><li><a href=/2.14/reference/multicluster/>Multi-cluster communication</a></li><li><a href=/2.14/reference/proxy-configuration/>Proxy Configuration</a></li><li><a href=/2.14/reference/proxy-log-level/>Proxy Log Level</a></li><li><a href=/2.14/reference/proxy-metrics/>Proxy Metrics</a></li><li><a href=/2.14/reference/service-profiles/>Service Profiles</a></li><li><a href=/2.14/reference/k8s-versions/>Supported Kubernetes Versions</a></li></ul></li></ul><ul><li><a href=/what-is-a-service-mesh/>What is a service mesh?</a></li><li><a href=/faq/>Frequently Asked Questions</a></li><li><a href=/releases/>Releases and Versions</a></li><li><a href=/design-principles/>Design Principles</a></li><li><a href=/going-to-production/>Going to Production</a></li><li><a href=/service-mesh-glossary/>Service Mesh Glossary</a></li></ul></nav><div class=docs__community><ul><li><a href=https://github.com/linkerd/linkerd2 target=_blank rel=noopener><img src=/logos/github.svg alt=GitHub class=img></a></li><li><a href=https://slack.linkerd.io target=_blank rel=noopener><img src=/logos/slack.svg alt=Slack class=img></a></li><li><a href=https://linkerd.buoyant.io target=_blank rel=noopener><img src=/logos/forum.png alt="Linkerd Forum" class=img></a></li></ul></div></div></div><div class=docs__main><div class=docs__body><div class=docs__header><h1>Authorization Policy</h1></div><div class="docs__content prose"><p>Linkerd&rsquo;s authorization policy allows you to control which types of
traffic are allowed to meshed pods. For example, you can restrict communication
to a particular service (or HTTP route on a service) to only come from certain
other services; you can enforce that mTLS must be used on a certain port; and so
on.</p><div class="alert alert--info alert--callout"><div class=alert__title><svg class="icon icon--current" viewBox="0 0 24 24"><path d="M13 9H11V7h2m0 10H11V11h2M12 2A10 10 0 002 12 10 10 0 0012 22 10 10 0 0022 12 10 10 0 0012 2z"/></svg><h4>Note</h4></div><div class=alert__content>Linkerd can only enforce policy on meshed pods, i.e. pods where the Linkerd
proxy has been injected. If policy is a strict requirement, you should pair the
usage of these features with <a href=../ha/>HA mode</a>, which enforces that the proxy
<em>must</em> be present when pods start up.</div></div><h2 id=policy-overview class=anchor>Policy overview
<a href=#policy-overview class=anchor__link><svg class="icon icon--primary" viewBox="0 0 24 24"><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7A5 5 0 002 12a5 5 0 005 5h4V15.1H7c-1.71.0-3.1-1.39-3.1-3.1M8 13h8V11H8v2m9-6H13V8.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1H13V17h4a5 5 0 005-5A5 5 0 0017 7z"/></svg></a></h2><p>By default Linkerd allows all traffic to transit the mesh, and uses a variety
of mechanisms, including <a href=../retries-and-timeouts/>retries</a> and <a href=../load-balancing/>load
balancing</a>, to ensure that requests are delivered
successfully.</p><p>Sometimes, however, we want to restrict which types of traffic are allowed.
Linkerd&rsquo;s policy features allow you to <em>deny</em> access to resources unless certain
conditions are met, including the TLS identity of the client.</p><p>Linkerd&rsquo;s policy is configured using two mechanisms:</p><ol><li>A set of <em>default policies</em>, which can be set at the cluster,
namespace, workload, and pod level through Kubernetes annotations.</li><li>A set of CRDs that specify fine-grained policy for specific ports, routes,
workloads, etc.</li></ol><p>These mechanisms work in conjunction. For example, a default cluster-wide policy
of <code>deny</code> would prohibit any traffic to any meshed pod; traffic would then need
to be explicitly allowed through the use of CRDs.</p><h2 id=default-policies class=anchor>Default policies
<a href=#default-policies class=anchor__link><svg class="icon icon--primary" viewBox="0 0 24 24"><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7A5 5 0 002 12a5 5 0 005 5h4V15.1H7c-1.71.0-3.1-1.39-3.1-3.1M8 13h8V11H8v2m9-6H13V8.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1H13V17h4a5 5 0 005-5A5 5 0 0017 7z"/></svg></a></h2><p>The <code>config.linkerd.io/default-inbound-policy</code> annotation can be set at a
namespace, workload, and pod level, and will determine the default traffic
policy at that point in the hierarchy. Valid default policies include:</p><ul><li><code>all-unauthenticated</code>: allow all requests. This is the default.</li><li><code>all-authenticated</code>: allow requests from meshed clients only.</li><li><code>cluster-authenticated</code>: allow requests form meshed clients in the same
cluster.</li><li><code>deny</code>: deny all requests.</li></ul><p>As well as several other default policies—see the <a href=../../reference/authorization-policy/>Policy
reference</a> for more.</p><p>Every cluster has a cluster-wide default policy (by default,
<code>all-unauthenticated</code>), set at install time. Annotations that are present at the
workload or namespace level <em>at pod creation time</em> can override that value to
determine the default policy for that pod. (Note that the default policy is fixed
at proxy initialization time, and thus, after a pod is created, changing the
annotation will not change the default policy for that pod.)</p><h2 id=fine-grained-policies class=anchor>Fine-grained policies
<a href=#fine-grained-policies class=anchor__link><svg class="icon icon--primary" viewBox="0 0 24 24"><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7A5 5 0 002 12a5 5 0 005 5h4V15.1H7c-1.71.0-3.1-1.39-3.1-3.1M8 13h8V11H8v2m9-6H13V8.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1H13V17h4a5 5 0 005-5A5 5 0 0017 7z"/></svg></a></h2><p>For finer-grained policy that applies to specific ports, routes, or more,
Linkerd uses a set of CRDs. In contrast to default policy annotations, these
policy CRDs can be changed dynamically and policy behavior will be updated on
the fly.</p><p>Two policy CRDs represent &ldquo;targets&rdquo; for policy: subsets of traffic over which
policy can be applied.</p><ul><li><a href=../../reference/authorization-policy/#server><code>Server</code></a>: all traffic to a port, for a set of pods in a namespace</li><li><a href=../httproute/><code>HTTPRoute</code></a>: a subset of HTTP requests for a <a href=../../reference/authorization-policy/#server><code>Server</code></a></li></ul><p>Two policy CRDs represent authentication rules that must be satisfied as part of
a policy rule:</p><ul><li><code>MeshTLSAuthentication</code>: authentication based on <a href=../automatic-mtls/>secure workload
identities</a></li><li><code>NetworkAuthentication</code>: authentication based on IP address</li></ul><p>And finally, two policy CRDs represent policy itself: the mapping of
authentication rules to targets.</p><ul><li><p><code>AuthorizationPolicy</code>: a policy that restricts access to one or more targets
unless an authentication rule is met</p></li><li><p><code>ServerAuthorization</code>: an earlier form of policy that restricts access to
<a href=../../reference/authorization-policy/#server><code>Server</code></a>s only (i.e. not <a href=../httproute/><code>HTTPRoute</code></a>s)</p></li></ul><p>The general pattern for Linkerd&rsquo;s dynamic, fine-grained policy is to define the
traffic target that must be protected (via a combination of <code>Server</code> and
<a href=../httproute/><code>HTTPRoute</code></a> CRs); define the types of authentication that are required before
access to that traffic is permitted (via <code>MeshTLSAuthentication</code> and
<code>NetworkAuthentication</code>); and then define the policy that maps authentication to
target (via an <code>AuthorizationPolicy</code>).</p><p>See the <a href=../../reference/authorization-policy/>Policy reference</a> for more
details on how these resources work.</p><h2 id=serverauthorization-vs-authorizationpolicy class=anchor>ServerAuthorization vs AuthorizationPolicy
<a href=#serverauthorization-vs-authorizationpolicy class=anchor__link><svg class="icon icon--primary" viewBox="0 0 24 24"><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7A5 5 0 002 12a5 5 0 005 5h4V15.1H7c-1.71.0-3.1-1.39-3.1-3.1M8 13h8V11H8v2m9-6H13V8.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1H13V17h4a5 5 0 005-5A5 5 0 0017 7z"/></svg></a></h2><p>Linkerd 2.12 introduced <code>AuthorizationPolicy</code> as a more flexible alternative to
<code>ServerAuthorization</code> that can target <a href=../httproute/><code>HTTPRoute</code></a>s as well as <code>Server</code>s. Use of
<code>AuthorizationPolicy</code> is preferred, and <code>ServerAuthorization</code> will be deprecated
in future releases.</p><h2 id=default-authorizations class=anchor>Default authorizations
<a href=#default-authorizations class=anchor__link><svg class="icon icon--primary" viewBox="0 0 24 24"><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7A5 5 0 002 12a5 5 0 005 5h4V15.1H7c-1.71.0-3.1-1.39-3.1-3.1M8 13h8V11H8v2m9-6H13V8.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1H13V17h4a5 5 0 005-5A5 5 0 0017 7z"/></svg></a></h2><p>A blanket denial of all to a pod would also deny health and readiness probes
from Kubernetes, meaning that the pod would not be able to start. Thus, any
default-deny setup must, in practice, still authorize these probes.</p><p>In order to simplify default-deny setups, Linkerd automatically authorizes
probes to pods. These default authorizations apply only when no <a href=../../reference/authorization-policy/#server><code>Server</code></a> is
configured for a port, or when a <a href=../../reference/authorization-policy/#server><code>Server</code></a> is configured but no <a href=../httproute/><code>HTTPRoute</code></a>s are
configured for that <a href=../../reference/authorization-policy/#server><code>Server</code></a>. If any <a href=../httproute/><code>HTTPRoute</code></a> matches the <code>Server</code>, these
automatic authorizations are not created and you must explicitly create them for
health and readiness probes.</p><h2 id=policy-rejections class=anchor>Policy rejections
<a href=#policy-rejections class=anchor__link><svg class="icon icon--primary" viewBox="0 0 24 24"><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7A5 5 0 002 12a5 5 0 005 5h4V15.1H7c-1.71.0-3.1-1.39-3.1-3.1M8 13h8V11H8v2m9-6H13V8.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1H13V17h4a5 5 0 005-5A5 5 0 0017 7z"/></svg></a></h2><p>Any traffic that is known to be HTTP (including HTTP/2 and gRPC) that is denied
by policy will result in the proxy returning an HTTP 403. All other traffic will
be denied at the TCP level, i.e. by refusing the connection.</p><p>Note that dynamically changing the policy to deny existing connections may
result in an abrupt termination of those connections.</p><h2 id=learning-more class=anchor>Learning more
<a href=#learning-more class=anchor__link><svg class="icon icon--primary" viewBox="0 0 24 24"><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7A5 5 0 002 12a5 5 0 005 5h4V15.1H7c-1.71.0-3.1-1.39-3.1-3.1M8 13h8V11H8v2m9-6H13V8.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1H13V17h4a5 5 0 005-5A5 5 0 0017 7z"/></svg></a></h2><ul><li><a href=../../reference/authorization-policy/>Authorization policy reference</a></li><li><a href=../../tasks/configuring-per-route-policy/>Guide to configuring per-route policy</a></li></ul></div></div></div></div></div></main><footer class=main-footer><div class=main-footer__top><div class="main-footer__container container"><div class=main-footer__info><p><img src=/logos/linkerd.png alt=Linkerd></p><p>Linkerd was originally created by <a href=https://buoyant.io/ target=_blank rel=noopener>Buoyant</a></p><p>View <a href=https://github.com/linkerd/linkerd/wiki/Linkerd-code-of-conduct target=_blank rel=noopener>Code of Conduct</a></p></div><div class=main-footer__links><div class=main-footer__community><h4>Community</h4><ul><li><a href=https://github.com/linkerd/linkerd2 target=_blank rel=noopener>GitHub</a></li><li><a href=https://slack.linkerd.io target=_blank rel=noopener>Slack</a></li><li><a href=https://linkerd.buoyant.io target=_blank rel=noopener>Linkerd Forum</a></li></ul></div><div class=main-footer__follow><h4>Follow</h4><ul><li><a href=https://www.linkedin.com/company/linkerd/ target=_blank rel=noopener>Linkedin</a></li><li><a href=https://www.youtube.com/buoyantio target=_blank rel=noopener>YouTube</a></li><li><a href=https://twitter.com/linkerd target=_blank rel=noopener>Twitter</a></li></ul></div></div></div></div><div class=main-footer__bottom><div class="main-footer__container container"><p><a href=https://github.com/linkerd/website/tree/main/linkerd.io/content target=_blank rel=noopener>Edit This Site</a></p><p>Copyright © 2024 Linkerd Authors. All rights reserved.</p></div></div></footer></body></html>