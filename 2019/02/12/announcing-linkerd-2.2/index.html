<!doctype html><html lang=en><head><meta charset=utf-8><title>Announcing Linkerd 2.2 | Linkerd</title>
<link rel="shortcut icon" href=/favicon.png><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Today we&rsquo;re very happy to announce the release of Linkerd 2.2. This major release introduces automatic request retries and timeouts, and graduates auto-inject to be a fully-supported (non-experimental) feature. It adds several new CLI commands (including logs and endpoints) that provide diagnostic visibility into Linkerd&rsquo;s control plane. Finally, it introduces two exciting experimental features: a cryptographically-secured client identity header, and a CNI plugin that avoids the need for NET_ADMIN kernel capabilities at deploy time."><meta property="og:url" content="https://travisbeckham.github.io/2019/02/12/announcing-linkerd-2.2/"><meta property="og:site_name" content="Linkerd"><meta property="og:title" content="Announcing Linkerd 2.2"><meta property="og:description" content="Today we’re very happy to announce the release of Linkerd 2.2. This major release introduces automatic request retries and timeouts, and graduates auto-inject to be a fully-supported (non-experimental) feature. It adds several new CLI commands (including logs and endpoints) that provide diagnostic visibility into Linkerd’s control plane. Finally, it introduces two exciting experimental features: a cryptographically-secured client identity header, and a CNI plugin that avoids the need for NET_ADMIN kernel capabilities at deploy time."><meta property="og:locale" content="en_us"><meta property="og:type" content="article"><meta property="article:section" content="blog"><meta property="article:published_time" content="2019-02-12T00:00:00+00:00"><meta property="article:modified_time" content="2019-02-12T00:00:00+00:00"><meta property="og:image" content="https://travisbeckham.github.io/2019/02/12/announcing-linkerd-2.2/cover.png"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://travisbeckham.github.io/2019/02/12/announcing-linkerd-2.2/cover.png"><meta name=twitter:title content="Announcing Linkerd 2.2"><meta name=twitter:description content="Today we’re very happy to announce the release of Linkerd 2.2. This major release introduces automatic request retries and timeouts, and graduates auto-inject to be a fully-supported (non-experimental) feature. It adds several new CLI commands (including logs and endpoints) that provide diagnostic visibility into Linkerd’s control plane. Finally, it introduces two exciting experimental features: a cryptographically-secured client identity header, and a CNI plugin that avoids the need for NET_ADMIN kernel capabilities at deploy time."><meta name=twitter:site content="@Linkerd"><link rel=canonical href=https://travisbeckham.github.io/2019/02/12/announcing-linkerd-2.2/><link rel=stylesheet href=/css/main.css><script src=/js/main.js></script><script async defer src=https://buttons.github.io/buttons.js></script><script type=application/ld+json>{"@context":"https://schema.org","@type":"Article","author":"William Morgan","datePublished":"2019-02-12T00:00:00Z","dateModified":"2019-02-12T00:00:00Z","headline":"Announcing Linkerd 2.2","image":"https://travisbeckham.github.io/2019/02/12/announcing-linkerd-2.2/cover.png","publisher":{"@type":"Organization","name":"linkerd.io","logo":{"@type":"ImageObject","url":"https://travisbeckham.github.io/logos/linkerd.png","width":472,"height":100}}}</script></head><body><header class=main-header><div class=main-header__container><div class=main-header__logo><a href=/><img src=/logos/linkerd.png alt=Linkerd></a></div><input class=main-header__toggle-checkbox type=checkbox id=main-header-toggle>
<label class=main-header__toggle for=main-header-toggle><span class=main-header__toggle-icon><span class=main-header__toggle-icon--open><svg class="icon icon--primary" viewBox="0 0 24 24"><path d="M3 6H21V8H3V6m0 5H21v2H3V11m0 5H21v2H3V16z"/></svg>
</span><span class=main-header__toggle-icon--close><svg class="icon icon--primary" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg></span></span></label><div class=main-header__nav><nav class=main-nav><ul class=main-nav__menu><li><a href=/docs>Docs</a></li><li><a href=#>Community<svg class="icon icon--primary" viewBox="0 0 24 24"><path d="M7.41 8.58 12 13.17l4.59-4.59L18 10l-6 6-6-6L7.41 8.58z"/></svg></a><ul><li><a href=/community/get-involved/>Get Involved</a></li><li><a href=/community/adopters/>Adopters</a></li><li><a href=/community/ambassadors/>Linkerd Ambassadors</a></li><li><a href=https://linkerd.buoyant.io target=_blank rel=noopener>Buoyant's Linkerd Forum</a></li></ul></li><li class=main-nav__menu--selected><a href=/blog/>Blog</a></li><li><a href=/faq/>FAQ</a></li><li><a href=/enterprise/>Enterprise</a></li></ul><div class=main-nav__search><form action=/search method=get><div class="search-input search-input--sm"><svg class="icon" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5.0 0116 9.5c0 1.61-.59 3.09-1.56 4.23L14.71 14H15.5l5 5L19 20.5l-5-5V14.71L13.73 14.44C12.59 15.41 11.11 16 9.5 16A6.5 6.5.0 013 9.5 6.5 6.5.0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
<input type=text name=q placeholder=Search></div></form></div><div class=main-nav__github><a class=github-button href=https://github.com/linkerd/linkerd2 data-icon=octicon-star data-size=large data-show-count=true aria-label="Star linkerd/linkerd2 on GitHub">Star</a></div><div class=main-nav__forum><a href=https://linkerd.buoyant.io class="button button--primary button--sm" target=_blank rel=noopener>Join Forum</a></div></nav></div></div></header><div class=main-announcement>Service Mesh 101: Get Service Mesh-Certified
<span class=main-announcement__link><a href=https://buoyant.io/courses/service-mesh-101 target=_blank rel=noopener>Enroll now</a></span></div><main class=main-content><div class="blog blog--single"><div class="blog__container container"><div class=blog-post><div class=blog-post__header><h1>Announcing Linkerd 2.2</h1><div class=blog-post-meta><div class=blog-post-meta__media><img src=/authors/william-morgan.jpg alt="William Morgan" class="img img--48 img--round"></div><div class=blog-post-meta__body><div class=blog-post-meta__name>William Morgan</div><div class=blog-post-meta__date>Feb 12, 2019 • 5 min read</div></div></div></div><div class=blog-post__cover></div><div class="blog-post__content prose"><p>Today we&rsquo;re very happy to announce the release of Linkerd 2.2. This major release introduces automatic request retries and timeouts, and graduates auto-inject to be a fully-supported (non-experimental) feature. It adds several new CLI commands (including <code>logs</code> and <code>endpoints</code>) that provide diagnostic visibility into Linkerd&rsquo;s control plane. Finally, it introduces two exciting experimental features: a cryptographically-secured client identity header, and a CNI plugin that avoids the need for NET_ADMIN kernel capabilities at deploy time.</p><p>This release includes contributions from folks at Attest, Buoyant, Mesosphere, Microsoft, Nordstrom, and many more. A special thank you to everyone who filed an issue, submitted a PR, tested a feature, and helped someone else in the <a href=https://slack.linkerd.io target=_blank rel=noopener>Slack</a> — the Linkerd community is awesome!</p><p>Those of you who have been tracking the 2.x branch via our <a href=https://linkerd.io/2.16/edge/ target=_blank rel=noopener>weekly edge releases</a> will already have seen these these features in action. Either way, you can download the stable 2.2 release by running:</p><div class=highlight><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>curl --proto <span style=color:#a5d6ff>&#39;=https&#39;</span> --tlsv1.2 -sSfL https://run.linkerd.io/install | sh
</span></span></code></pre></div><p>With that, on to the features!</p><h2 id=retries-and-timeouts>Retries and timeouts</h2><p>Linkerd 2.2 can now automatically retry failed requests, improving the overall success rate of your application in the presence of partial failures. Building on top of the <a href=https://linkerd.io/2.16/features/service-profiles target=_blank rel=noopener>service profiles</a> model introduced in 2.1, Linkerd allows you to configure this behavior on a per-route basis. Here&rsquo;s a <a href=https://asciinema.org/a/227055 target=_blank rel=noopener>quick screencast</a> of using retries and timeouts to handle a failing endpoint.</p><p>In this screencast we can see that the output of <code>linkerd routes</code> now includes an ACTUAL_SUCCESS column, measuring success rate of requests on the wire, and an EFFECTIVE_SUCCESS column, measuring success rate from the caller&rsquo;s perspective, i.e. after Linkerd has done its retries.</p><p>Of course, controlling <em>when</em> retries can be implemented is a critical component of making retries safe to use. Linkerd 2.2 allows you to mark which routes are idempotent (<code>isRetryable</code>), limit the maximum time spent retrying an individual request (<code>timeout</code>), and configure the percentage of overall requests that can be retries (<code>retryBudget</code>). This parameterization allows you to ensure that retries happen safely and don&rsquo;t escalate issues in an already-failing system.</p><h2 id=auto-inject-and-uninject-and-improvements-to-inject>Auto-inject (and uninject, and improvements to inject)</h2><p>Linkerd 2.2 graduates auto-inject to be a fully-supported (non-experimental) feature. Auto-inject is a feature that allows a Kubernetes cluster to automatically add (&ldquo;inject&rdquo;) Linkerd&rsquo;s data plane proxies to application pods as they&rsquo;re deployed.</p><p>Moving proxy injection out of the client and onto the cluster can help ensure that all pods are running the proxy uniformly, regardless of how they&rsquo;re deployed. Linkerd 2.2 also switches auto-inject&rsquo;s behavior to be opt-in rather than opt-out. This means that, once enabled, only namespaces or pods that have the <code>linkerd.io/inject: enabled</code> annotation will have auto-inject behavior.</p><p>Finally, for client side (non-auto) injection, Linkerd 2.2 improves the <code>linkerd inject</code> command to upgrade the proxy versions if they&rsquo;re already specified in the manifest (previous behavior was to skip them entirely), and introduces a <code>linkerd uninject</code> command for removing Linked&rsquo;s proxy from given Kubernetes manifest.</p><h2 id=better-net_admin-handling-with-a-cni-plugin>Better NET_ADMIN handling with a CNI plugin</h2><p>Linkerd 2.2 introduces a new, experimental CNI plugin that does network configuration outside of the security context of the user deploying their application. This makes Linkerd better suited for multi-tenant clusters, where administrators may not want to grant kernel capabilities (specifically, NET_ADMIN) to users.</p><p>Background: injecting Linkerd&rsquo;s data plane proxy into a pod requires setting iptables rules so that all TCP traffic to and from a pod automatically goes through its proxy, without any application configuration needed. Typically, this is done via a Kubernetes Init Container that runs as the deployer&rsquo;s service account. In single-tenant clusters this is usually fine, but in multi-tenant clusters this can pose a problem: modifying iptables rules requires the kernel&rsquo;s NET_ADMIN capability, but granting this capability allows tenants to control the network configuration across the host as a whole.</p><p>With Linkerd&rsquo;s new CNI plugin, this network configuration is done in at the CNI level, effectively removes the requirement that users have the NET_ADMIN kernel capability. This makes running Linkerd in multi-tenant, security-conscious environments far more practical.</p><p>This plugin was contributed by our friends at Nordstrom Engineering and was inspired by <a href=https://github.com/istio/cni target=_blank rel=noopener>Istio&rsquo;s CNI plugin</a>. A special thank you to <a href=https://github.com/codeman9 target=_blank rel=noopener>Cody Vandermyn</a> for this feature.</p><h2 id=client-identity>Client Identity</h2><p>Linkerd 2.2 introduces a new, secure mechanism for providing <em>client identity</em> on incoming requests. When <code>--tls=optional</code> is enabled, Linkerd now adds <code>l5d-client-id</code> header to each request. This header can be used by application code to implement authorization, e.g. requiring all requests to be authenticated or restricting access to specific services.</p><p>This header is currently marked as experimental, but is a critical first step towards providing comprehensive authentication and authorization mechanisms for Linkerd. In coming weeks, we&rsquo;ll be publishing Linked&rsquo;s roadmap for securely providing both <em>identity</em> and <em>confidentiality</em> of communication within a Kubernetes cluster.</p><h2 id=a-new-san-francisco-linkerd-meetup>A new San Francisco Linkerd Meetup</h2><p>Ok, this isn&rsquo;t technically part of 2.2 but there&rsquo;s a brand new <a href=https://www.meetup.com/San-Francisco-Linkerd-Meetup/ target=_blank rel=noopener>San Francisco Linkerd Meetup Group</a>. Come join us and meet some of the fine folks involved in Linkerd!</p><h2 id=whats-next-for-linkerd>What&rsquo;s next for Linkerd?</h2><p>Linkerd 2.2 is the culmination of months of work from contributors from around the globe, and we&rsquo;re very excited to be able to unveil it today!</p><p>In upcoming releases, you should expect Linkerd 2.x to continue filling out features around reliability, traffic shifting, and security (especially around identity and confidentiality of communication). In the medium term, we&rsquo;ll also be moving to reduce Linkerd&rsquo;s dependence on Kubernetes. Finally, Linkerd 1.x continues under active development, and we remain committed to supporting our 1.x users.</p><p>Linkerd is a community project and is hosted by the <a href=https://cncf.io target=_blank rel=noopener>Cloud Native Computing Foundation</a>. If you have feature requests, questions, or comments, we&rsquo;d love to have you join our rapidly-growing community! Linkerd is hosted on <a href=https://github.com/linkerd/ target=_blank rel=noopener>GitHub</a>, and we have a thriving community on <a href=https://slack.linkerd.io target=_blank rel=noopener>Slack</a>, <a href=https://twitter.com/linkerd target=_blank rel=noopener>Twitter</a>, and the <a href=https://linkerd.io/2.16/get-involved/ target=_blank rel=noopener>mailing lists</a>. Come and join the fun!</p></div></div><div class=blog-post-related><h2>Suggested Blog Posts</h2><div class=blog-post-related__pages><div class="card card--horz card--center"><div class=card__media><img src=/2019/04/10/browser-testing-from-scratch-building-quick-and-easy-integration-tests-with-webdriverio-and-saucelabs/cover.png alt=Cover class="img img--128 img--rounded"></div><div class=card__body><div class=card__header><h4><a href=/2019/04/10/browser-testing-from-scratch-building-quick-and-easy-integration-tests-with-webdriverio-and-saucelabs/>Browser Testing from Scratch: Building Quick and Easy Integration Tests with
WebdriverIO and SauceLabs</a></h4><div class=blog-post-meta><div class=blog-post-meta__date>Apr 10, 2019 • 9 min read</div></div></div></div></div><div class="card card--horz card--center"><div class=card__media><img src=/2018/12/08/service-profiles-for-per-route-metrics/cover.png alt=Cover class="img img--128 img--rounded"></div><div class=card__body><div class=card__header><h4><a href=/2018/12/08/service-profiles-for-per-route-metrics/>Service Profiles for Per-Route Metrics</a></h4><div class=blog-post-meta><div class=blog-post-meta__date>Dec 8, 2018 • 7 min read</div></div></div></div></div><div class="card card--horz card--center"><div class=card__media><img src=/2018/10/19/the-linkerd-enthusiasts-guide-to-kubecon-na-2018-2/cover.png alt=Cover class="img img--128 img--rounded"></div><div class=card__body><div class=card__header><h4><a href=/2018/10/19/the-linkerd-enthusiasts-guide-to-kubecon-na-2018-2/>The Linkerd Enthusiast’s Guide to Kubecon NA 2018</a></h4><div class=blog-post-meta><div class=blog-post-meta__date>Oct 19, 2018 • 2 min read</div></div></div></div></div></div></div></div></div></main><footer class=main-footer><div class=main-footer__top><div class="main-footer__container container"><div class=main-footer__info><p><img src=/logos/linkerd.png alt=Linkerd></p><p>Linkerd was originally created by <a href=https://buoyant.io/ target=_blank rel=noopener>Buoyant</a></p><p>View <a href=https://github.com/linkerd/linkerd/wiki/Linkerd-code-of-conduct target=_blank rel=noopener>Code of Conduct</a></p></div><div class=main-footer__links><div class=main-footer__community><h4>Community</h4><ul><li><a href=https://github.com/linkerd/linkerd2 target=_blank rel=noopener>GitHub</a></li><li><a href=https://slack.linkerd.io target=_blank rel=noopener>Slack</a></li><li><a href=https://linkerd.buoyant.io target=_blank rel=noopener>Linkerd Forum</a></li></ul></div><div class=main-footer__follow><h4>Follow</h4><ul><li><a href=https://www.linkedin.com/company/linkerd/ target=_blank rel=noopener>Linkedin</a></li><li><a href=https://www.youtube.com/buoyantio target=_blank rel=noopener>YouTube</a></li><li><a href=https://twitter.com/linkerd target=_blank rel=noopener>Twitter</a></li></ul></div></div></div></div><div class=main-footer__bottom><div class="main-footer__container container"><p><a href=https://github.com/linkerd/website/tree/main/linkerd.io/content target=_blank rel=noopener>Edit This Site</a></p><p>Copyright © 2024 Linkerd Authors. All rights reserved.</p></div></div></footer></body></html>