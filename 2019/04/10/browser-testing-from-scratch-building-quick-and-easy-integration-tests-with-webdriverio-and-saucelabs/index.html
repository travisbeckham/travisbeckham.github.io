<!doctype html><html lang=en><head><meta charset=utf-8><title>Browser Testing from Scratch: Building Quick and Easy Integration Tests with
WebdriverIO and SauceLabs | Linkerd</title>
<link rel="shortcut icon" href=/favicon.png><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="This post was written for engineers who are building front-end integration test suites from scratch, particularly if your project is open-source. If you want to skip the background information and go right to the tutorial, scroll down to &ldquo;Building Your Testing Architecture.&rdquo;
One of the coolest things about working on Linkerd is how excited our users are about our clean, deceptively simple dashboard, built with React and Material-UI. (Wanna try it? Get our super-light, open-source service mesh up and running in just a few minutes!)"><meta property="og:url" content="https://travisbeckham.github.io/2019/04/10/browser-testing-from-scratch-building-quick-and-easy-integration-tests-with-webdriverio-and-saucelabs/"><meta property="og:site_name" content="Linkerd"><meta property="og:title" content="Browser Testing from Scratch: Building Quick and Easy Integration Tests with
WebdriverIO and SauceLabs"><meta property="og:description" content="This post was written for engineers who are building front-end integration test suites from scratch, particularly if your project is open-source. If you want to skip the background information and go right to the tutorial, scroll down to “Building Your Testing Architecture.”
One of the coolest things about working on Linkerd is how excited our users are about our clean, deceptively simple dashboard, built with React and Material-UI. (Wanna try it? Get our super-light, open-source service mesh up and running in just a few minutes!)"><meta property="og:locale" content="en_us"><meta property="og:type" content="article"><meta property="article:section" content="blog"><meta property="article:published_time" content="2019-04-10T00:00:00+00:00"><meta property="article:modified_time" content="2019-04-10T00:00:00+00:00"><meta property="og:image" content="https://travisbeckham.github.io/2019/04/10/browser-testing-from-scratch-building-quick-and-easy-integration-tests-with-webdriverio-and-saucelabs/cover.png"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://travisbeckham.github.io/2019/04/10/browser-testing-from-scratch-building-quick-and-easy-integration-tests-with-webdriverio-and-saucelabs/cover.png"><meta name=twitter:title content="Browser Testing from Scratch: Building Quick and Easy Integration Tests with
WebdriverIO and SauceLabs"><meta name=twitter:description content="This post was written for engineers who are building front-end integration test suites from scratch, particularly if your project is open-source. If you want to skip the background information and go right to the tutorial, scroll down to “Building Your Testing Architecture.”
One of the coolest things about working on Linkerd is how excited our users are about our clean, deceptively simple dashboard, built with React and Material-UI. (Wanna try it? Get our super-light, open-source service mesh up and running in just a few minutes!)"><meta name=twitter:site content="@Linkerd"><link rel=canonical href=https://travisbeckham.github.io/2019/04/10/browser-testing-from-scratch-building-quick-and-easy-integration-tests-with-webdriverio-and-saucelabs/><link rel=stylesheet href=/css/main.css><script src=/js/main.js></script><script async defer src=https://buttons.github.io/buttons.js></script><script type=application/ld+json>{"@context":"https://schema.org","@type":"Article","author":"Carol Scott","datePublished":"2019-04-10T00:00:00Z","dateModified":"2019-04-10T00:00:00Z","headline":"Browser Testing from Scratch: Building Quick and Easy Integration Tests with\nWebdriverIO and SauceLabs","image":"https://travisbeckham.github.io/2019/04/10/browser-testing-from-scratch-building-quick-and-easy-integration-tests-with-webdriverio-and-saucelabs/cover.png","publisher":{"@type":"Organization","name":"linkerd.io","logo":{"@type":"ImageObject","url":"https://travisbeckham.github.io/logos/linkerd.png","width":472,"height":100}}}</script></head><body><header class=main-header><div class=main-header__container><div class=main-header__logo><a href=/><img src=/logos/linkerd.png alt=Linkerd></a></div><input class=main-header__toggle-checkbox type=checkbox id=main-header-toggle>
<label class=main-header__toggle for=main-header-toggle><span class=main-header__toggle-icon><span class=main-header__toggle-icon--open><svg class="icon icon--primary" viewBox="0 0 24 24"><path d="M3 6H21V8H3V6m0 5H21v2H3V11m0 5H21v2H3V16z"/></svg>
</span><span class=main-header__toggle-icon--close><svg class="icon icon--primary" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg></span></span></label><div class=main-header__nav><nav class=main-nav><ul class=main-nav__menu><li><a href=/docs>Docs</a></li><li><a href=#>Community<svg class="icon icon--primary" viewBox="0 0 24 24"><path d="M7.41 8.58 12 13.17l4.59-4.59L18 10l-6 6-6-6L7.41 8.58z"/></svg></a><ul><li><a href=/community/get-involved/>Get Involved</a></li><li><a href=/community/adopters/>Adopters</a></li><li><a href=/community/ambassadors/>Linkerd Ambassadors</a></li><li><a href=https://linkerd.buoyant.io target=_blank rel=noopener>Buoyant's Linkerd Forum</a></li></ul></li><li class=main-nav__menu--selected><a href=/blog/>Blog</a></li><li><a href=/faq/>FAQ</a></li><li><a href=/enterprise/>Enterprise</a></li></ul><div class=main-nav__search><form action=/search method=get><div class="search-input search-input--sm"><svg class="icon" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5.0 0116 9.5c0 1.61-.59 3.09-1.56 4.23L14.71 14H15.5l5 5L19 20.5l-5-5V14.71L13.73 14.44C12.59 15.41 11.11 16 9.5 16A6.5 6.5.0 013 9.5 6.5 6.5.0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
<input type=text name=q placeholder=Search></div></form></div><div class=main-nav__github><a class=github-button href=https://github.com/linkerd/linkerd2 data-icon=octicon-star data-size=large data-show-count=true aria-label="Star linkerd/linkerd2 on GitHub">Star</a></div><div class=main-nav__forum><a href=https://linkerd.buoyant.io class="button button--primary button--sm" target=_blank rel=noopener>Join Forum</a></div></nav></div></div></header><div class=main-announcement>Service Mesh 101: Get Service Mesh-Certified
<span class=main-announcement__link><a href=https://buoyant.io/courses/service-mesh-101 target=_blank rel=noopener>Enroll now</a></span></div><main class=main-content><div class="blog blog--single"><div class="blog__container container"><div class=blog-post><div class=blog-post__header><h1>Browser Testing from Scratch: Building Quick and Easy Integration Tests with
WebdriverIO and SauceLabs</h1><div class=blog-post-meta><div class=blog-post-meta__body><div class=blog-post-meta__name>Carol Scott</div><div class=blog-post-meta__date>Apr 10, 2019 • 9 min read</div></div></div></div><div class=blog-post__cover></div><div class="blog-post__content prose"><p><em>This post was written for engineers who are building front-end integration test suites from scratch, particularly if your project is open-source. If you want to skip the background information and go right to the tutorial, scroll down to</em> <strong>&ldquo;Building Your Testing Architecture.&rdquo;</strong></p><p>One of the coolest things about working on <a href=http://www.linkerd.io target=_blank rel=noopener>Linkerd</a> is how excited our users are about our clean, deceptively simple dashboard, built with <a href=https://reactjs.org/ target=_blank rel=noopener>React</a> and <a href=https://material-ui.com/ target=_blank rel=noopener>Material-UI</a>. (Wanna try it? Get our super-light, open-source service mesh <a href=https://linkerd.io/2.16/getting-started/ target=_blank rel=noopener>up and running in just a few minutes</a>!)</p><figure><img alt="Linkerd dashboard" class="img img--max-fill img--center img--rounded" src=/2019/04/10/browser-testing-from-scratch-building-quick-and-easy-integration-tests-with-webdriverio-and-saucelabs/linkerd-dashboard-screenshot.png><figcaption>Linkerd dashboard screenshot from edge release 19.3.2.</figcaption></figure><p>And when I say excited, I mean unsolicited-praise excited: we constantly get messages from users like this:</p><figure><img alt=Tweet class="img img--max-fill img--center img--rounded" src=/2019/04/10/browser-testing-from-scratch-building-quick-and-easy-integration-tests-with-webdriverio-and-saucelabs/happy-tweet.png><figcaption>Tweet by a happy Linkerd user!</figcaption></figure><p>We want to keep our users happy with a clean, consistent dashboard as we constantly roll out new features and improvements, so recently we built a suite of integration tests simulating a user&rsquo;s traversal through the application.</p><h2 id=why-front-end-integration-tests>Why Front-End Integration Tests?</h2><p>If you&rsquo;re reading this, you&rsquo;re probably already sold on the idea of testing, but as an <a href=https://www.cncf.io/projects/ target=_blank rel=noopener>open source project</a>, there are a few additional advantages of front-end integration tests you may not have considered:</p><h3 id=integration-tests-are-a-great-way-to-onboard-open-source-contributors>Integration tests are a great way to onboard open source contributors</h3><p>We are lucky to have a ton of contributors to Linkerd, both power users and open source enthusiasts. Forking our repo and running the tests are a great way for a new contributor to ensure their development environment is properly set up.</p><h3 id=and-to-encourage-them-to-submit-their-first-pr>&mldr;And to encourage them to submit their first PR</h3><p>Writing, or updating, a test is a fabulous way to contribute to a project without much prior knowledge required.</p><h3 id=most-importantly-you-can-sanity-check-ui-changes-in-a-fast-moving-dev-environment>Most importantly, you can sanity-check UI changes in a fast-moving dev environment</h3><p>If you&rsquo;re reviewing multiple PRs a day from many different contributors, it becomes important to have a set of actions to run through in the browser to ensure you haven&rsquo;t inadvertently broken or changed any functionality.</p><p>Yes, clicking through yourself is always the first step when making a front-end change! But, I mean, we&rsquo;re not <em>robots</em>. That&rsquo;s where WebdriverIO comes in:</p><figure><img alt=WebdriverIO class="img img--max-fill img--center img--rounded" src=/2019/04/10/browser-testing-from-scratch-building-quick-and-easy-integration-tests-with-webdriverio-and-saucelabs/webdriverio-logo.png></figure><p>WebdriverIO is a test automation framework for Node.js that allows you to get a test suite up and running in minutes. You don&rsquo;t need any Selenium knowledge to get started, although there is an entire universe of libraries built by the WebdriverIO community that can add layers of complexity.</p><p>In the spirit of open source, we&rsquo;re sharing what we&rsquo;ve learned. This post should take you from 0 to a full test architecture. You&rsquo;ll be able to run your tests locally and, if you have a Sauce Labs account, in the cloud! SauceLabs is free for open source projects. Let&rsquo;s get started!</p><h2 id=building-your-testing-architecture>Building Your Testing Architecture</h2><p>Before we start, you need to have the following installed:</p><ul><li><a href=https://yarnpkg.com/en/docs/getting-started target=_blank rel=noopener>Yarn</a></li><li><a href=https://nodejs.org/en/download/ target=_blank rel=noopener>Node.js</a></li></ul><p><strong>Recommended</strong>: If you install Yarn through the <a href=https://brew.sh/ target=_blank rel=noopener>Homebrew package manager</a> it will download Node.js as well.</p><p>First, navigate to the directory in your project that holds your web application. Ours is named <code>app</code>:</p><div class=highlight><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>cd app
</span></span></code></pre></div><p>Now it&rsquo;s time to add some packages! First, we&rsquo;ll add WebdriverIO:</p><div class=highlight><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>yarn add webdriverio --dev
</span></span></code></pre></div><p>We added the <code>--dev</code> flag because we want this package to be part of the <code>devDependencies</code> portion of our <code>package.json</code>, since we&rsquo;ll be running our tests in a development environment. If you didn&rsquo;t already have a <code>package.json</code> file, this command will create one for you.</p><p>Now, we&rsquo;ll add WebdriverIO&rsquo;s testrunner command line interface, which is what will allow you to run the tests from your terminal:</p><div class=highlight><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>yarn add @wdio/cli --dev
</span></span></code></pre></div><div class="alert alert--info alert--callout"><div class=alert__title><svg class="icon icon--current" viewBox="0 0 24 24"><path d="M13 9H11V7h2m0 10H11V11h2M12 2A10 10 0 002 12 10 10 0 0012 22 10 10 0 0022 12 10 10 0 0012 2z"/></svg><h4>Note</h4></div><div class=alert__content>When WebdriverIO 5 was released, the project switched to a <code>@wdio</code> naming structure. In general, if a library is prefixed with <code>@wdio</code> it is officially part of the WebdriverIO project, and if it is prefixed with <code>wdio</code> it is a community project.</div></div><p>The <code>@wdio/cli</code> testrunner comes with a config file generator, which we won&rsquo;t use for this project. If you want to learn more about it, visit WebdriverIO&rsquo;s <a href=https://webdriver.io/docs/gettingstarted.html target=_blank rel=noopener>Getting Started</a> page. Instead, we&rsquo;ll download the packages we need directly:</p><div class=highlight><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>yarn add chromedriver @wdio/local-runner @wdio/mocha-framework @wdio/sync wdio-chromedriver-service --dev
</span></span></code></pre></div><p>These packages are, respectively:</p><ul><li><code>chromedriver</code> Automated testing for Chrome</li><li><code>@wdio/local-runner</code> A WebdriverIO runner to run tests locally</li><li><code>@wdio/mocha-framework</code> Adapter for Mocha testing framework</li><li><code>@wdio/sync</code> Helper module to run WebdriverIO commands synchronously</li><li><code>wdio-chromedriver-service</code> (community package: WebdriverIO service to start & stop ChromeDriver)</li></ul><p>Now, from <code>app</code>, let&rsquo;s create a subdirectory for our tests:</p><div class=highlight><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>mkdir integration <span style=color:#ff7b72;font-weight:700>&amp;&amp;</span> cd integration
</span></span><span style=display:flex><span>touch wdio.conf.js
</span></span></code></pre></div><p>In the <code>integration</code> directory, we&rsquo;ll create a config file to tell WebdriverIO what to do. In your text editor, open <code>wdio.conf.js</code> and paste:</p><div class=highlight><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span>exports.config <span style=color:#ff7b72;font-weight:700>=</span> {
</span></span><span style=display:flex><span>  port<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>9515</span>, <span style=color:#8b949e;font-style:italic>// default for ChromeDriver
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>  path<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>&#39;/&#39;</span>,
</span></span><span style=display:flex><span>  services<span style=color:#ff7b72;font-weight:700>:</span> [<span style=color:#a5d6ff>&#39;chromedriver&#39;</span>],
</span></span><span style=display:flex><span>  runner<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>&#39;local&#39;</span>,
</span></span><span style=display:flex><span>  specs<span style=color:#ff7b72;font-weight:700>:</span> [<span style=color:#a5d6ff>&#39;./integration/specs/*.js&#39;</span>],
</span></span><span style=display:flex><span>  exclude<span style=color:#ff7b72;font-weight:700>:</span> [
</span></span><span style=display:flex><span>    <span style=color:#8b949e;font-style:italic>// &#39;path/to/excluded/files&#39;
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>  ],
</span></span><span style=display:flex><span>  maxInstances<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>10</span>,
</span></span><span style=display:flex><span>  capabilities<span style=color:#ff7b72;font-weight:700>:</span> [
</span></span><span style=display:flex><span>    { browserName<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>&#39;chrome&#39;</span>, platform<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>&#39;OS X 10.13&#39;</span>, version<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>&#39;69.0&#39;</span> }
</span></span><span style=display:flex><span>  ],
</span></span><span style=display:flex><span>  bail<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>0</span>,
</span></span><span style=display:flex><span>  baseUrl<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>&#39;http://localhost&#39;</span>,
</span></span><span style=display:flex><span>  waitforTimeout<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>10000</span>,
</span></span><span style=display:flex><span>  connectionRetryTimeout<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>90000</span>,
</span></span><span style=display:flex><span>  connectionRetryCount<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>3</span>,
</span></span><span style=display:flex><span>  framework<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>&#39;mocha&#39;</span>,
</span></span><span style=display:flex><span>  mochaOpts<span style=color:#ff7b72;font-weight:700>:</span> {
</span></span><span style=display:flex><span>    ui<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>&#39;bdd&#39;</span>,
</span></span><span style=display:flex><span>    timeout<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>60000</span>
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>As you can see, we&rsquo;re specifying that our tests will live in <code>/integration/specs/</code>, that we are using Chromedriver and specifying a specific platform and version to run the tests.</p><p>Create a <code>specs/</code> directory with a sample test file:</p><div class=highlight><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>mkdir specs <span style=color:#ff7b72;font-weight:700>&amp;&amp;</span> cd specs <span style=color:#ff7b72;font-weight:700>&amp;&amp;</span> touch first-test.js
</span></span></code></pre></div><p>At this point your directory structure should look like this:</p><div class=highlight><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>app/
</span></span><span style=display:flex><span>  node_modules/
</span></span><span style=display:flex><span>  package.json
</span></span><span style=display:flex><span>  integration/
</span></span><span style=display:flex><span>    wdio.conf.js
</span></span><span style=display:flex><span>    specs/
</span></span><span style=display:flex><span>      first-test.js
</span></span></code></pre></div><p>Let&rsquo;s run a simple test where we go over to <a href=http://linkerd.io target=_blank rel=noopener>Linkerd.io</a> and check that the title of the page is what we expect. Open <code>first-test.js</code> and paste the following:</p><div class=highlight><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#ff7b72>const</span> assert <span style=color:#ff7b72;font-weight:700>=</span> require(<span style=color:#a5d6ff>&#39;assert&#39;</span>)
</span></span><span style=display:flex><span>describe(<span style=color:#a5d6ff>&#39;logo link test&#39;</span>, <span style=color:#ff7b72>function</span>() {
</span></span><span style=display:flex><span>  it(<span style=color:#a5d6ff>&#39;should redirect to the home view if logo is clicked&#39;</span>, () =&gt; {
</span></span><span style=display:flex><span>    browser.url(<span style=color:#a5d6ff>&#39;http://www.linkerd.io&#39;</span>)
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>const</span> title <span style=color:#ff7b72;font-weight:700>=</span> browser.getTitle()
</span></span><span style=display:flex><span>    assert.equal(title, <span style=color:#a5d6ff>&#39;Linkerd - Linkerd&#39;</span>)
</span></span><span style=display:flex><span>  })
</span></span><span style=display:flex><span>})
</span></span></code></pre></div><p>Right now, you&rsquo;re still in your <code>specs</code> directory. Go back up to your <code>app</code> directory to run the tests:</p><div class=highlight><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>cd ../..
</span></span><span style=display:flex><span>./node_modules/.bin/wdio ./integration/wdio.conf.js
</span></span></code></pre></div><p>You should see a message in your terminal saying &ldquo;Starting ChromeDriver on port 9515&rdquo;. An instance of Chrome window should then open up, go to <a href=http://linkerd.io target=_blank rel=noopener>Linkerd.io</a> and close. You should see &ldquo;1 Passing&rdquo; in your terminal!</p><figure><img alt=WebdriverIO class="img img--max-fill img--center img--rounded" src=/2019/04/10/browser-testing-from-scratch-building-quick-and-easy-integration-tests-with-webdriverio-and-saucelabs/terminal-message.png><figcaption>WebdriverIO success message in terminal: 1 passed, 1 total (100% completed)</figcaption></figure><p>Awesome, you just successfully ran an integration test with WebdriverIO! 🥳 You can start building these tests out to test your application. I&rsquo;ve found the WebdriverIO <a href=https://webdriver.io/docs/selectors.html target=_blank rel=noopener>Selector Docs</a> very helpful.</p><h2 id=testing-in-the-cloud>Testing in the Cloud</h2><p>You&rsquo;re currently just running the tests on one browser. This will help find bugs in functionality, but a big part of front-end development is making sure your application looks consistent — and works — on multiple browsers and devices.</p><p>You could instruct WebdriverIO to run the tests on multiple different browsers locally (and maybe you want to), but if you add in all of the different versions and device sizes that your application should support, that quickly grows out of hand.</p><p>Enter SauceLabs, whose cross-browser testing tools are <a href=https://saucelabs.com/open-source target=_blank rel=noopener>free for open source projects</a> and allow you to run tests in a host of browser types, versions and sizes.</p><figure><img alt=SauceLabs class="img img--max-fill img--center img--rounded" src=/2019/04/10/browser-testing-from-scratch-building-quick-and-easy-integration-tests-with-webdriverio-and-saucelabs/saucelabs-logo.png></figure><p>If you have an open source project and want to use SauceLabs, you first need to <a href=https://saucelabs.com/open-source target=_blank rel=noopener>apply for an account</a>. You can also sign up for a free trial on their site. (If you&rsquo;re a Linkerd contributor, the best way to get a contributor credential is to <a href=https://slack.linkerd.io/ target=_blank rel=noopener>ask on our Slack channel</a>.)</p><p>SauceLabs will give you a username and key. Once you have those credentials, set them as permanent environment variables. This keeps your credentials private, and means that everyone on the team can run the tests via their unique login without modifying the test files.</p><p>To do that, open your <code>~/.bash_profile</code> file and add:</p><div class=highlight><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>export <span style=color:#79c0ff>SAUCE_USERNAME</span><span style=color:#ff7b72;font-weight:700>=</span><span style=color:#a5d6ff>&#34;your Sauce username&#34;</span>
</span></span><span style=display:flex><span>export <span style=color:#79c0ff>SAUCE_ACCESS_KEY</span><span style=color:#ff7b72;font-weight:700>=</span><span style=color:#a5d6ff>&#34;your Sauce access key&#34;</span>
</span></span></code></pre></div><p>Great! Now, in your <code>integration</code> directory, we&rsquo;ll need to create a separate config file for running WebdriverIO with SauceLabs.</p><div class=highlight><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>cd integration <span style=color:#8b949e;font-style:italic># from app directory</span>
</span></span><span style=display:flex><span>touch wdio-sauce.conf.js
</span></span></code></pre></div><p>Open that file and paste in the following:</p><div class=highlight><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span>exports.config <span style=color:#ff7b72;font-weight:700>=</span> {
</span></span><span style=display:flex><span>  runner<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>&#39;local&#39;</span>,
</span></span><span style=display:flex><span>  user<span style=color:#ff7b72;font-weight:700>:</span> process.env.SAUCE_USERNAME,
</span></span><span style=display:flex><span>  key<span style=color:#ff7b72;font-weight:700>:</span> process.env.SAUCE_ACCESS_KEY,
</span></span><span style=display:flex><span>  sauceConnect<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#79c0ff>true</span>,
</span></span><span style=display:flex><span>  specs<span style=color:#ff7b72;font-weight:700>:</span> [<span style=color:#a5d6ff>&#39;./integration/specs/*.js&#39;</span>],
</span></span><span style=display:flex><span>  <span style=color:#8b949e;font-style:italic>// Patterns to exclude.
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>  exclude<span style=color:#ff7b72;font-weight:700>:</span> [
</span></span><span style=display:flex><span>    <span style=color:#8b949e;font-style:italic>// &#39;path/to/excluded/files&#39;
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>  ],
</span></span><span style=display:flex><span>  maxInstances<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>10</span>,
</span></span><span style=display:flex><span>  capabilities<span style=color:#ff7b72;font-weight:700>:</span> [
</span></span><span style=display:flex><span>    { browserName<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>&#39;firefox&#39;</span>, platform<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>&#39;Windows 10&#39;</span>, version<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>&#39;60.0&#39;</span> },
</span></span><span style=display:flex><span>    { browserName<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>&#39;chrome&#39;</span>, platform<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>&#39;OS X 10.13&#39;</span>, version<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>&#39;69.0&#39;</span> }
</span></span><span style=display:flex><span>  ],
</span></span><span style=display:flex><span>  bail<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>0</span>,
</span></span><span style=display:flex><span>  baseUrl<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>&#39;http://localhost&#39;</span>,
</span></span><span style=display:flex><span>  waitforTimeout<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>10000</span>,
</span></span><span style=display:flex><span>  connectionRetryTimeout<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>90000</span>,
</span></span><span style=display:flex><span>  connectionRetryCount<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>3</span>,
</span></span><span style=display:flex><span>  framework<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>&#39;mocha&#39;</span>,
</span></span><span style=display:flex><span>  mochaOpts<span style=color:#ff7b72;font-weight:700>:</span> {
</span></span><span style=display:flex><span>    ui<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>&#39;bdd&#39;</span>,
</span></span><span style=display:flex><span>    timeout<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>60000</span>
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>As you can see, we&rsquo;ve removed the <code>port</code> , <code>path</code> and <code>services</code> variables and added our Sauce <code>user</code> and <code>key</code>. We&rsquo;ve switched on something called <code>sauceConnect</code> and added two specific browsers to try, Firefox and Chrome.</p><h2 id=tunneling-to-localhost-in-3-2-1>Tunneling to Localhost in 3, 2, 1</h2><p><a href=https://wiki.saucelabs.com/display/DOCS/Sauce+Connect+Proxy target=_blank rel=noopener>SauceConnect</a> is a proxy server that will open a tunnel between a SauceLabs Virtual Machine (VM) and whatever you are running on <code>localhost.</code>You&rsquo;ll want to save it in a separate directory from the rest of your development files.</p><div class="alert alert--info alert--callout"><div class=alert__title><svg class="icon icon--current" viewBox="0 0 24 24"><path d="M13 9H11V7h2m0 10H11V11h2M12 2A10 10 0 002 12 10 10 0 0012 22 10 10 0 0022 12 10 10 0 0012 2z"/></svg><h4>Note</h4></div><div class=alert__content>SauceConnect only <a href=https://wiki.saucelabs.com/display/DOCS/Sauce+Connect+Proxy+FAQS#SauceConnectProxyFAQS-CanIAccessApplicationsonlocalhost target=_blank rel=noopener>supports specific port numbers to tunnel to localhost</a>, so you may need to change the port where you serve the dashboard. We had to change from <code>:8084</code> to <code>:7777</code> in order for the tunnel to work.</div></div><p>After <a href=https://wiki.saucelabs.com/display/DOCS/Sauce+Connect+Proxy target=_blank rel=noopener>downloading SauceConnect</a>, navigate to that directory and start it up:</p><div class=highlight><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#79c0ff>SC</span><span style=color:#ff7b72;font-weight:700>=</span>sc-4.5.3-osx <span style=color:#8b949e;font-style:italic># OSX example</span>
</span></span><span style=display:flex><span>wget -O - https://saucelabs.com/downloads/<span style=color:#79c0ff>$SC</span>.zip | tar -xzf - -C ~/
</span></span><span style=display:flex><span>cd ~/<span style=color:#79c0ff>$SC</span>
</span></span><span style=display:flex><span>bin/sc -u <span style=color:#79c0ff>$SAUCE_USERNAME</span> -k <span style=color:#79c0ff>$SAUCE_ACCESS_KEY</span>
</span></span></code></pre></div><p>Wait until you see &ldquo;Sauce Connect is up, you may start your tests&rdquo; in your terminal. Open a separate terminal window, navigate to <code>app</code> and run:</p><div class=highlight><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>./node_modules/.bin/wdio ./integration/wdio-sauce.conf.js
</span></span></code></pre></div><p>SauceLabs will start running the tests in the cloud. You can watch them run in real-time from the <a href=https://app.saucelabs.com/dashboard/tests target=_blank rel=noopener>SauceLabs dashboard</a> (and even take over if you want to manually control where the test goes).</p><figure><img alt="SauceLabs dashboard" class="img img--max-fill img--center img--rounded" src=/2019/04/10/browser-testing-from-scratch-building-quick-and-easy-integration-tests-with-webdriverio-and-saucelabs/saucelabs-dashboard-screenshot.png><figcaption>SauceLabs dashboard screenshot showing a report of an integration test</figcaption></figure><p>If any tests fail, you&rsquo;ll immediately get the URL in your terminal window with a video of the test and information about what happened. (Break the test and try that now!)</p><p>When you&rsquo;re finished testing, <strong>close the tunnel</strong> by pressing <code>CTRL-C</code> in the Sauce Connect window. If you forget to do this, it will close on its own after a few minutes.</p><h2 id=finishing-up>Finishing Up</h2><p>Congratulations! You&rsquo;ve now set up testing architecture for your project, with a test you can run locally on Chrome and in the cloud on multiple browsers.</p><p>If you want to make it REALLY easy for your team to run, you can create shortcuts in a <code>bin</code> file (check out the <code>integration</code> function <a href=https://github.com/linkerd/linkerd2/blob/main/bin/web target=_blank rel=noopener>in our repo&rsquo;s bin/web file</a>).</p><h2 id=go-forth-and-test->Go Forth and Test! 🚀</h2><p>Your next challenge is to replace our simple <code>first-test.js</code> with a set of practical tests for your own application. Good luck! If you have any questions, feel free to shoot me <a href=https://twitter.com/CarolScottSF target=_blank rel=noopener>a note on Twitter</a> or <a href=https://github.com/linkerd/linkerd2 target=_blank rel=noopener>file an issue or feature request for Linkerd</a>.</p><p>Want to learn more? We’d love to have you join our rapidly-growing community! Linkerd is <a href=https://github.com/linkerd/linkerd2 target=_blank rel=noopener>hosted on GitHub</a>, and we have a thriving community on <a href=https://slack.linkerd.io target=_blank rel=noopener>Slack</a>, <a href=https://twitter.com/linkerd target=_blank rel=noopener>Twitter</a>, and our <a href=https://lists.cncf.io/g/cncf-linkerd-users target=_blank rel=noopener>mailing lists</a>. Come and join the fun!</p></div></div><div class=blog-post-related><h2>Suggested Blog Posts</h2><div class=blog-post-related__pages><div class="card card--horz card--center"><div class=card__media><img src=/2018/12/08/service-profiles-for-per-route-metrics/cover.png alt=Cover class="img img--128 img--rounded"></div><div class=card__body><div class=card__header><h4><a href=/2018/12/08/service-profiles-for-per-route-metrics/>Service Profiles for Per-Route Metrics</a></h4><div class=blog-post-meta><div class=blog-post-meta__date>Dec 8, 2018 • 7 min read</div></div></div></div></div><div class="card card--horz card--center"><div class=card__media><img src=/2022/12/01/what-really-happens-at-startup-a-deep-dive-into-linkerd-init-containers-cni-plugins-and-more/thumbnail.jpg alt=Thumbnail class="img img--128 img--rounded"></div><div class=card__body><div class=card__header><h4><a href=/2022/12/01/what-really-happens-at-startup-a-deep-dive-into-linkerd-init-containers-cni-plugins-and-more/>What really happens at startup: Linkerd, init containers, the CNI, and more</a></h4><div class=blog-post-meta><div class=blog-post-meta__date>Dec 1, 2022 • 12 min read</div></div></div></div></div><div class="card card--horz card--center"><div class=card__media><img src=/2020/03/23/serverless-service-mesh-with-knative-and-linkerd/cover.png alt=Cover class="img img--128 img--rounded"></div><div class=card__body><div class=card__header><h4><a href=/2020/03/23/serverless-service-mesh-with-knative-and-linkerd/>Serverless Service Mesh with Knative and Linkerd</a></h4><div class=blog-post-meta><div class=blog-post-meta__date>Mar 23, 2020 • 13 min read</div></div></div></div></div></div></div></div></div></main><footer class=main-footer><div class=main-footer__top><div class="main-footer__container container"><div class=main-footer__info><p><img src=/logos/linkerd.png alt=Linkerd></p><p>Linkerd was originally created by <a href=https://buoyant.io/ target=_blank rel=noopener>Buoyant</a></p><p>View <a href=https://github.com/linkerd/linkerd/wiki/Linkerd-code-of-conduct target=_blank rel=noopener>Code of Conduct</a></p></div><div class=main-footer__links><div class=main-footer__community><h4>Community</h4><ul><li><a href=https://github.com/linkerd/linkerd2 target=_blank rel=noopener>GitHub</a></li><li><a href=https://slack.linkerd.io target=_blank rel=noopener>Slack</a></li><li><a href=https://linkerd.buoyant.io target=_blank rel=noopener>Linkerd Forum</a></li></ul></div><div class=main-footer__follow><h4>Follow</h4><ul><li><a href=https://www.linkedin.com/company/linkerd/ target=_blank rel=noopener>Linkedin</a></li><li><a href=https://www.youtube.com/buoyantio target=_blank rel=noopener>YouTube</a></li><li><a href=https://twitter.com/linkerd target=_blank rel=noopener>Twitter</a></li></ul></div></div></div></div><div class=main-footer__bottom><div class="main-footer__container container"><p><a href=https://github.com/linkerd/website/tree/main/linkerd.io/content target=_blank rel=noopener>Edit This Site</a></p><p>Copyright © 2024 Linkerd Authors. All rights reserved.</p></div></div></footer></body></html>