<!doctype html><html lang=en><head><meta charset=utf-8><title>Distributed tracing in the service mesh: four myths | Linkerd</title>
<link rel="shortcut icon" href=/favicon.png><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="One of the most common feature requests for Linkerd 2.x is distributed
tracing. We're happy to report that this feature is on the near-term Linkerd
roadmap. Unfortunately, we've found that many of the people asking for this
feature don't quite understand what they're asking for."><meta property="og:url" content="https://travisbeckham.github.io/2019/08/09/service-mesh-distributed-tracing-myths/"><meta property="og:site_name" content="Linkerd"><meta property="og:title" content="Distributed tracing in the service mesh: four myths"><meta property="og:description" content="One of the most common feature requests for Linkerd 2.x is distributed
tracing. We're happy to report that this feature is on the near-term Linkerd
roadmap. Unfortunately, we've found that many of the people asking for this
feature don't quite understand what they're asking for."><meta property="og:locale" content="en_us"><meta property="og:type" content="article"><meta property="article:section" content="blog"><meta property="article:published_time" content="2019-08-09T00:00:00+00:00"><meta property="article:modified_time" content="2019-08-09T00:00:00+00:00"><meta property="og:image" content="https://travisbeckham.github.io/2019/08/09/service-mesh-distributed-tracing-myths/cover.jpg"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://travisbeckham.github.io/2019/08/09/service-mesh-distributed-tracing-myths/cover.jpg"><meta name=twitter:title content="Distributed tracing in the service mesh: four myths"><meta name=twitter:description content="One of the most common feature requests for Linkerd 2.x is distributed
tracing. We're happy to report that this feature is on the near-term Linkerd
roadmap. Unfortunately, we've found that many of the people asking for this
feature don't quite understand what they're asking for."><meta name=twitter:site content="@Linkerd"><link rel=canonical href=https://travisbeckham.github.io/2019/08/09/service-mesh-distributed-tracing-myths/><link rel=stylesheet href=/css/main.css><script src=/js/main.js></script><script async defer src=https://buttons.github.io/buttons.js></script><script type=application/ld+json>{"@context":"https://schema.org","@type":"Article","author":"William Morgan","datePublished":"2019-08-09T00:00:00Z","dateModified":"2019-08-09T00:00:00Z","headline":"Distributed tracing in the service mesh: four myths","image":"https://travisbeckham.github.io/2019/08/09/service-mesh-distributed-tracing-myths/cover.jpg","publisher":{"@type":"Organization","name":"linkerd.io","logo":{"@type":"ImageObject","url":"https://travisbeckham.github.io/logos/linkerd.png","width":472,"height":100}}}</script></head><body><header class=main-header><div class=main-header__container><div class=main-header__logo><a href=/><img src=/logos/linkerd.png alt=Linkerd></a></div><input class=main-header__toggle-checkbox type=checkbox id=main-header-toggle>
<label class=main-header__toggle for=main-header-toggle><span class=main-header__toggle-icon><span class=main-header__toggle-icon--open><svg class="icon icon--primary" viewBox="0 0 24 24"><path d="M3 6H21V8H3V6m0 5H21v2H3V11m0 5H21v2H3V16z"/></svg>
</span><span class=main-header__toggle-icon--close><svg class="icon icon--primary" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg></span></span></label><div class=main-header__nav><nav class=main-nav><ul class=main-nav__menu><li><a href=/docs>Docs</a></li><li><a href=#>Community<svg class="icon icon--primary" viewBox="0 0 24 24"><path d="M7.41 8.58 12 13.17l4.59-4.59L18 10l-6 6-6-6L7.41 8.58z"/></svg></a><ul><li><a href=/community/get-involved/>Get Involved</a></li><li><a href=/community/adopters/>Adopters</a></li><li><a href=/community/ambassadors/>Linkerd Ambassadors</a></li><li><a href=https://linkerd.buoyant.io target=_blank rel=noopener>Buoyant's Linkerd Forum</a></li></ul></li><li class=main-nav__menu--selected><a href=/blog/>Blog</a></li><li><a href=/faq/>FAQ</a></li><li><a href=/enterprise/>Enterprise</a></li></ul><div class=main-nav__search><form action=/search method=get><div class="search-input search-input--sm"><svg class="icon" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5.0 0116 9.5c0 1.61-.59 3.09-1.56 4.23L14.71 14H15.5l5 5L19 20.5l-5-5V14.71L13.73 14.44C12.59 15.41 11.11 16 9.5 16A6.5 6.5.0 013 9.5 6.5 6.5.0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
<input type=text name=q placeholder=Search></div></form></div><div class=main-nav__github><a class=github-button href=https://github.com/linkerd/linkerd2 data-icon=octicon-star data-size=large data-show-count=true aria-label="Star linkerd/linkerd2 on GitHub">Star</a></div><div class=main-nav__forum><a href=https://linkerd.buoyant.io class="button button--primary button--sm" target=_blank rel=noopener>Join Forum</a></div></nav></div></div></header><div class=main-announcement>Service Mesh 101: Get Service Mesh-Certified
<span class=main-announcement__link><a href=https://buoyant.io/courses/service-mesh-101 target=_blank rel=noopener>Enroll now</a></span></div><main class=main-content><div class="blog blog--single"><div class="blog__container container"><div class=blog-post><div class=blog-post__header><h1>Distributed tracing in the service mesh: four myths</h1><div class=blog-post-meta><div class=blog-post-meta__media><img src=/authors/william-morgan.jpg alt="William Morgan" class="img img--48 img--round"></div><div class=blog-post-meta__body><div class=blog-post-meta__name>William Morgan</div><div class=blog-post-meta__date>Aug 9, 2019 â€¢ 5 min read</div></div></div></div><div class=blog-post__cover><img src=/2019/08/09/service-mesh-distributed-tracing-myths/cover.jpg alt=Cover class="img img--fill img--rounded"></div><div class="blog-post__content prose"><p>One of the most common feature requests for Linkerd 2.x is <em>distributed
tracing</em>. We&rsquo;re happy to report that this feature is on the <a href=https://github.com/linkerd/linkerd2/issues/3188 target=_blank rel=noopener>near-term Linkerd
roadmap</a>. Unfortunately,
we&rsquo;ve found that many of the people asking for this feature don&rsquo;t quite
understand what they&rsquo;re asking for.</p><p>A few weeks ago we <a href=https://twitter.com/linkerd/status/1152326635959439360 target=_blank rel=noopener>conducted a Twitter
survey</a> to understand
why people were asking for distributed tracing. This was highly
unscientific&ndash;64 respondents, advertised purely on Twitter, not peer reviewed,
etc&ndash;but the results suggested some common misunderstandings of what
distributed tracing support in a service mesh would actually provide, and what
it would require from them to be useful.</p><p>These misunderstandings can be characterized as a set of myths, which I&rsquo;ll
dispel below.</p><h2 id=myth-1-i-need-distributed-tracing-to-measure-the-health--latency--throughput-of-my-services>Myth 1: I need distributed tracing to measure the health / latency / throughput of my services</h2><p><strong>False</strong>. Many respondents suggested that measuring service success rate,
latency, etc was a desired use case for distributed tracing in the service
mesh. While this is a possible use of distributed tracing data when a service
mesh is not in place, the service mesh itself already provides these metrics,
and arguably does so in a way that&rsquo;s better than what can be achieved with
distributed tracing. (No sampling, no code changes required.)</p><p>For example, Linkerd provides success rate, throughput, and latency
distributions per service (as well as per route, per client per service, per
client per route, etc) from metrics data, and the Linkerd dashboard and CLI
report this data today:</p><figure><img alt="Linkerd dashboard showing an automatically generated route metrics" class="img img--max-fill img--center img--rounded" src=/2019/08/09/service-mesh-distributed-tracing-myths/webapp-routes.png></figure><h2 id=myth-2-i-need-distributed-tracing-to-see-which-services-talk-to-which-other-services>Myth 2: I need distributed tracing to see which services talk to which other services</h2><p><strong>False</strong>. Many respondents suggested that drawing a <em>service topology</em> was a
desired use of distributed tracing in a service mesh. Again, while this is a
role that distributed tracing can provide outside of a service mesh, the
service mesh can detect and display these relationships purely from metrics
data, again without requiring any application-level changes.</p><p>For example, the Linkerd dashboard displays the set of upstream and downstream
Kubernetes deployments on the deployment detail page:</p><figure><img alt="Linkerd dashboard showing an automatically generated topology graph" class="img img--max-fill img--center img--rounded" src=/2019/08/09/service-mesh-distributed-tracing-myths/webapp-detail.png></figure><h2 id=myth-3-i-can-get-distributed-tracing-from-the-service-mesh-without-having-to-make-any-changes-to-my-application>Myth 3: I can &ldquo;get distributed tracing&rdquo; from the service mesh without having to make any changes to my application</h2><p><strong>False</strong>. Many respondents answered that they would not expect to need any
application changes once Linkerd added distributed tracing support.
Unfortunately, while a service mesh can emit trace spans from the proxies, the
application will need to <em>propagate headers</em> in order for these spans to be
pulled together into traces&ndash;i.e. copy any distributed tracing header that is
attached to an incoming request to each resulting outgoing request.</p><p>In other words, in contrast to nearly every other service mesh feature,
distributed tracing mesh can only work if developers make changes to their
code. Note that this isn&rsquo;t a flaw with Linkerd; this is a function of the
sidecar proxy model and is true of any sidecar-based service mesh.</p><h2 id=myth-4-i-can-get-distributed-tracing-from-a-service-mesh-by-instrumenting-my-application-with-a-distributed-tracing-library>Myth 4: I can &ldquo;get distributed tracing&rdquo; from a service mesh by instrumenting my application with a distributed tracing library</h2><p><em>Sort of true</em>. Some respondents answered that they would make use of
distributed tracing in Linkerd by instrumenting their applications with a
distributed tracing library. It&rsquo;s true that these libraries will make it easy
to propagate the headers, thus accomplishing the development work you need to
do to make use of distributed tracing. But once you&rsquo;re at this point, you have
distributed tracing, regardless of whether the service mesh &ldquo;supports
distributed tracing&rdquo; or not! (Of course, Linkerd support will add some
important data&ndash;see below.)</p><h2 id=what-does-distributed-tracing-support-in-a-service-mesh-actually-get-you>What does distributed tracing support in a service mesh actually get you?</h2><p>If you&rsquo;ve decided you want distributed tracing, <em>and</em> you are willing and able
to modify your application to support it, then what distributed tracing support
at the service mesh level actually gets you is:</p><ol><li>Proxy timing and data in your traces. This can be helpful for understanding
how much latency for particular requests is coming from the proxy. (Happily,
<a href=/2019/05/18/linkerd-benchmarks/>Linkerd is very, very fast</a>, but
nothing is free.)</li><li>Traces that extend to ingress points. This can be helpful for painting a
more complete picture of how time is spent on particular requests.</li><li>Distributed tracing functionality without needing to couple application code
to a particular library. This is helpful if you don&rsquo;t want to commit to a
particular library, or don&rsquo;t have library support in the languages you need.</li></ol><p>Those are all valuable features, certainly, but they&rsquo;re a far cry from some of
the expectations we saw in the survey.</p><p>All that said, <a href=https://github.com/linkerd/linkerd2/issues/3188 target=_blank rel=noopener>distributed tracing support <em>is</em> on the near-term roadmap for
Linkerd 2.x</a>. If this is a
valuable feature for you in Linkerd 2.x, please leave a comment on that ticket
saying as much&ndash;we&rsquo;d love to hear from you.</p><p><em>Linkerd is a community project and is hosted by the <a href=https://cncf.io/ target=_blank rel=noopener>Cloud Native Computing
Foundation</a>. If you have feature requests, questions, or
comments, we&rsquo;d love to have you join our rapidly-growing community! Linkerd is
hosted on <a href=https://github.com/linkerd/ target=_blank rel=noopener>GitHub</a>, and we have a thriving
community on <a href=https://slack.linkerd.io/ target=_blank rel=noopener>Slack</a>,
<a href=https://twitter.com/linkerd target=_blank rel=noopener>Twitter</a>, and the <a href=https://linkerd.io/2.16/get-involved/ target=_blank rel=noopener>mailing
lists</a>. Come and join the fun!</em></p><p><em>Special thanks to Alex Ellis, Matt Turner, and Alex Klemmer for reviewing
drafts of this post. All errors are mine, not theirs.</em></p><p>(<em>Image credit: <a href=https://www.flickr.com/photos/7699384@N07/ target=_blank rel=noopener>Digital Vincent</a></em>)</p></div></div><div class=blog-post-related><h2>Suggested Blog Posts</h2><div class=blog-post-related__pages><div class="card card--horz card--center"><div class=card__media><img src=/2024/10/15/linkerd-edge-release-roundup/thumbnail.png alt=Thumbnail class="img img--128 img--rounded"></div><div class=card__body><div class=card__header><h4><a href=/2024/10/15/linkerd-edge-release-roundup/>Linkerd Edge Release Roundup: October 2024</a></h4><div class=blog-post-meta><div class=blog-post-meta__date>Oct 15, 2024 â€¢ 4 min read</div></div></div></div></div><div class="card card--horz card--center"><div class=card__media><img src=/2024/09/06/linkerd-edge-release-roundup/thumbnail.png alt=Thumbnail class="img img--128 img--rounded"></div><div class=card__body><div class=card__header><h4><a href=/2024/09/06/linkerd-edge-release-roundup/>Linkerd Edge Release Roundup: September 2024</a></h4><div class=blog-post-meta><div class=blog-post-meta__date>Sep 6, 2024 â€¢ 3 min read</div></div></div></div></div><div class="card card--horz card--center"><div class=card__media><img src=/2024/08/13/announcing-linkerd-2.16/cover.jpg alt=Cover class="img img--128 img--rounded"></div><div class=card__body><div class=card__header><h4><a href=/2024/08/13/announcing-linkerd-2.16/>Announcing Linkerd 2.16! Metrics, retries, and timeouts for HTTP and gRPC
routes; IPv6 support; policy audit mode; and lots more</a></h4><div class=blog-post-meta><div class=blog-post-meta__date>Aug 13, 2024 â€¢ 6 min read</div></div></div></div></div></div></div></div></div></main><footer class=main-footer><div class=main-footer__top><div class="main-footer__container container"><div class=main-footer__info><p><img src=/logos/linkerd.png alt=Linkerd></p><p>Linkerd was originally created by <a href=https://buoyant.io/ target=_blank rel=noopener>Buoyant</a></p><p>View <a href=https://github.com/linkerd/linkerd/wiki/Linkerd-code-of-conduct target=_blank rel=noopener>Code of Conduct</a></p></div><div class=main-footer__links><div class=main-footer__community><h4>Community</h4><ul><li><a href=https://github.com/linkerd/linkerd2 target=_blank rel=noopener>GitHub</a></li><li><a href=https://slack.linkerd.io target=_blank rel=noopener>Slack</a></li><li><a href=https://linkerd.buoyant.io target=_blank rel=noopener>Linkerd Forum</a></li></ul></div><div class=main-footer__follow><h4>Follow</h4><ul><li><a href=https://www.linkedin.com/company/linkerd/ target=_blank rel=noopener>Linkedin</a></li><li><a href=https://www.youtube.com/buoyantio target=_blank rel=noopener>YouTube</a></li><li><a href=https://twitter.com/linkerd target=_blank rel=noopener>Twitter</a></li></ul></div></div></div></div><div class=main-footer__bottom><div class="main-footer__container container"><p><a href=https://github.com/linkerd/website/tree/main/linkerd.io/content target=_blank rel=noopener>Edit This Site</a></p><p>Copyright Â© 2024 Linkerd Authors. All rights reserved.</p></div></div></footer></body></html>