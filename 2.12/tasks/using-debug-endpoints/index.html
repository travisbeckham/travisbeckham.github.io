<!doctype html><html lang=en><head><meta charset=utf-8><title>Control Plane Debug Endpoints | Linkerd</title>
<link rel="shortcut icon" href=/favicon.png><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Linkerd's control plane components provide debug endpoints."><meta property="og:url" content="https://travisbeckham.github.io/2.12/tasks/using-debug-endpoints/"><meta property="og:site_name" content="Linkerd"><meta property="og:title" content="Control Plane Debug Endpoints"><meta property="og:description" content="Linkerd's control plane components provide debug endpoints."><meta property="og:locale" content="en_us"><meta property="og:type" content="article"><meta property="article:section" content="2.12"><meta property="og:image" content="https://travisbeckham.github.io/logos/linkerd.png"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://travisbeckham.github.io/logos/linkerd.png"><meta name=twitter:title content="Control Plane Debug Endpoints"><meta name=twitter:description content="Linkerd's control plane components provide debug endpoints."><meta name=twitter:site content="@Linkerd"><link rel=canonical href=https://travisbeckham.github.io/2.12/tasks/using-debug-endpoints/><link rel=stylesheet href=/css/main.css><script src=/js/main.js></script><script async defer src=https://buttons.github.io/buttons.js></script></head><body><header class=main-header><div class=main-header__container><div class=main-header__logo><a href=/><img src=/logos/linkerd.png alt=Linkerd></a></div><input class=main-header__toggle-checkbox type=checkbox id=main-header-toggle>
<label class=main-header__toggle for=main-header-toggle><span class=main-header__toggle-icon><span class=main-header__toggle-icon--open><svg class="icon icon--primary" viewBox="0 0 24 24"><path d="M3 6H21V8H3V6m0 5H21v2H3V11m0 5H21v2H3V16z"/></svg>
</span><span class=main-header__toggle-icon--close><svg class="icon icon--primary" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg></span></span></label><div class=main-header__nav><nav class=main-nav><ul class=main-nav__menu><li class=main-nav__menu--selected><a href=/docs>Docs</a></li><li><a href>Community<svg class="icon icon--primary" viewBox="0 0 24 24"><path d="M7.41 8.58 12 13.17l4.59-4.59L18 10l-6 6-6-6L7.41 8.58z"/></svg></a><ul><li><a href=/community/get-involved/>Get Involved</a></li><li><a href=/community/adopters/>Adopters</a></li><li><a href=/community/ambassadors/>Linkerd Ambassadors</a></li><li><a href=/community/heroes/>Linkerd Heroes</a></li><li><a href=https://linkerd.buoyant.io target=_blank rel=noopener>Buoyant's Linkerd Forum</a></li></ul></li><li><a href=/blog/>Blog</a></li><li><a href=/faq/>FAQ</a></li><li><a href=/enterprise/>Enterprise</a></li></ul><div class=main-nav__search><form action=/search method=get><div class="search-input search-input--sm"><svg class="icon" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5.0 0116 9.5c0 1.61-.59 3.09-1.56 4.23L14.71 14H15.5l5 5L19 20.5l-5-5V14.71L13.73 14.44C12.59 15.41 11.11 16 9.5 16A6.5 6.5.0 013 9.5 6.5 6.5.0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
<input type=text name=q placeholder=Search></div></form></div><div class=main-nav__github><a class=github-button href=https://github.com/linkerd/linkerd2 data-icon=octicon-star data-size=large data-show-count=true aria-label="Star linkerd/linkerd2 on GitHub">Star</a></div><div class=main-nav__forum><a href=https://linkerd.buoyant.io class="button button--primary button--sm" target=_blank rel=noopener>Join Forum</a></div></nav></div></div></header><div class=main-announcement>Service Mesh 101: Get Service Mesh-Certified
<span class=main-announcement__link><a href=https://buoyant.io/courses/service-mesh-101 target=_blank rel=noopener>Enroll now</a></span></div><main class=main-content><div class="alert alert--warning alert--condensed alert--center docs__deprecated-alert"><div class=alert__content>You are viewing docs for an older version of Linkerd.
<a href=/2.16/>View the latest docs</a>.</div></div><div class=docs><div class=docs__container><div class=docs__sidebar><div class=docs__nav><div class=docs__versions><select onchange="window.location.href=this.value"><option value=/2-edge/>Linkerd edge</option><option value=/2.16/>Linkerd 2.16</option><option value=/2.15/>Linkerd 2.15</option><option value=/2.14/>Linkerd 2.14</option><option value=/2.13/>Linkerd 2.13</option><option value=/2.12/ selected>Linkerd 2.12</option><option value=/2.11/>Linkerd 2.11</option><option value=/2.10/>Linkerd 2.10</option><option value=/2.9/>Linkerd 2.9</option></select></div><nav><ul><li><a href=/2.12/overview/>Overview</a></li><li><a href=/2.12/getting-started/>Getting Started</a></li><li><a href=/2.12/features/>Features
</a><input class=toggle__input type=checkbox id=toggle-451debf55674ca42b496c251f32b1e24>
<label class=toggle__label for=toggle-451debf55674ca42b496c251f32b1e24><svg class="icon icon--secondary" viewBox="0 0 24 24"><path d="M8.59 16.58 13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg></label><ul class=toggle__target><li><a href=/2.12/features/http-grpc/>HTTP, HTTP/2, and gRPC Proxying</a></li><li><a href=/2.12/features/protocol-detection/>TCP Proxying and Protocol Detection</a></li><li><a href=/2.12/features/retries-and-timeouts/>Retries and Timeouts</a></li><li><a href=/2.12/features/automatic-mtls/>Automatic mTLS</a></li><li><a href=/2.12/features/ingress/>Ingress</a></li><li><a href=/2.12/features/telemetry/>Telemetry and Monitoring</a></li><li><a href=/2.12/features/load-balancing/>Load Balancing</a></li><li><a href=/2.12/features/server-policy/>Authorization Policy</a></li><li><a href=/2.12/features/proxy-injection/>Automatic Proxy Injection</a></li><li><a href=/2.12/features/cni/>CNI Plugin</a></li><li><a href=/2.12/features/dashboard/>Dashboard and on-cluster metrics stack</a></li><li><a href=/2.12/features/distributed-tracing/>Distributed Tracing</a></li><li><a href=/2.12/features/fault-injection/>Fault Injection</a></li><li><a href=/2.12/features/ha/>High Availability</a></li><li><a href=/2.12/features/access-logging/>HTTP Access Logging</a></li><li><a href=/2.12/features/multicluster/>Multi-cluster communication</a></li><li><a href=/2.12/features/nft/>Proxy Init Iptables Modes</a></li><li><a href=/2.12/features/service-profiles/>Service Profiles</a></li><li><a href=/2.12/features/traffic-split/>Traffic Split (canaries, blue/green deploys)</a></li></ul></li><li class=docs__nav--selected><a href=/2.12/tasks/>Tasks
</a><input class=toggle__input type=checkbox id=toggle-bd74b9215cf78dd6fa457943dd02a886 checked>
<label class=toggle__label for=toggle-bd74b9215cf78dd6fa457943dd02a886><svg class="icon icon--secondary" viewBox="0 0 24 24"><path d="M8.59 16.58 13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg></label><ul class=toggle__target><li><a href=/2.12/tasks/adding-your-service/>Adding your services to Linkerd</a></li><li><a href=/2.12/tasks/canary-release/>Automated Canary Releases</a></li><li><a href=/2.12/tasks/automatic-failover/>Automatic Multicluster Failover</a></li><li><a href=/2.12/tasks/automatically-rotating-control-plane-tls-credentials/>Automatically Rotating Control Plane TLS Credentials</a></li><li><a href=/2.12/tasks/automatically-rotating-webhook-tls-credentials/>Automatically Rotating Webhook TLS Credentials</a></li><li><a href=/2.12/tasks/external-prometheus/>Bringing your own Prometheus</a></li><li><a href=/2.12/tasks/configuring-per-route-policy/>Configuring Per-Route Policy</a></li><li><a href=/2.12/tasks/configuring-proxy-concurrency/>Configuring Proxy Concurrency</a></li><li><a href=/2.12/tasks/configuring-retries/>Configuring Retries</a></li><li><a href=/2.12/tasks/configuring-timeouts/>Configuring Timeouts</a></li><li class=docs__nav--selected><a href=/2.12/tasks/using-debug-endpoints/>Control Plane Debug Endpoints</a></li><li><a href=/2.12/tasks/customize-install/>Customizing Linkerd's Configuration with Kustomize</a></li><li><a href=/2.12/tasks/debugging-502s/>Debugging 502s</a></li><li><a href=/2.12/tasks/debugging-your-service/>Debugging gRPC applications with request tracing</a></li><li><a href=/2.12/tasks/books/>Debugging HTTP applications with per-route metrics</a></li><li><a href=/2.12/tasks/distributed-tracing/>Distributed tracing with Linkerd</a></li><li><a href=/2.12/tasks/exporting-metrics/>Exporting Metrics</a></li><li><a href=/2.12/tasks/exposing-dashboard/>Exposing the Dashboard</a></li><li><a href=/2.12/tasks/generate-certificates/>Generating your own mTLS root certificates</a></li><li><a href=/2.12/tasks/getting-per-route-metrics/>Getting Per-Route Metrics</a></li><li><a href=/2.12/tasks/linkerd-smi/>Getting started with Linkerd SMI extension</a></li><li><a href=/2.12/tasks/graceful-shutdown/>Graceful Pod Shutdown</a></li><li><a href=/2.12/tasks/grafana/>Grafana</a></li><li><a href=/2.12/tasks/using-ingress/>Ingress traffic</a></li><li><a href=/2.12/tasks/fault-injection/>Injecting Faults</a></li><li><a href=/2.12/tasks/install/>Installing Linkerd</a></li><li><a href=/2.12/tasks/install-helm/>Installing Linkerd with Helm</a></li><li><a href=/2.12/tasks/installing-multicluster/>Installing Multi-cluster Components</a></li><li><a href=/2.12/tasks/using-psp/>Linkerd and Pod Security Policies (PSP)</a></li><li><a href=/2.12/tasks/manually-rotating-control-plane-tls-credentials/>Manually Rotating Control Plane TLS Credentials</a></li><li><a href=/2.12/tasks/modifying-proxy-log-level/>Modifying the Proxy Log Level</a></li><li><a href=/2.12/tasks/multicluster/>Multi-cluster communication</a></li><li><a href=/2.12/tasks/multicluster-using-statefulsets/>Multi-cluster communication with StatefulSets</a></li><li><a href=/2.12/tasks/replacing_expired_certificates/>Replacing expired certificates</a></li><li><a href=/2.12/tasks/restricting-access/>Restricting Access To Services</a></li><li><a href=/2.12/tasks/rotating_webhooks_certificates/>Rotating webhooks certificates</a></li><li><a href=/2.12/tasks/securing-linkerd-tap/>Securing Linkerd Tap</a></li><li><a href=/2.12/tasks/setting-up-service-profiles/>Setting Up Service Profiles</a></li><li><a href=/2.12/tasks/troubleshooting/>Troubleshooting</a></li><li><a href=/2.12/tasks/uninstall/>Uninstalling Linkerd</a></li><li><a href=/2.12/tasks/uninstall-multicluster/>Uninstalling Multicluster</a></li><li><a href=/2.12/tasks/upgrade/>Upgrading Linkerd</a></li><li><a href=/2.12/tasks/using-custom-domain/>Using a Custom Cluster Domain</a></li><li><a href=/2.12/tasks/using-a-private-docker-repository/>Using A Private Docker Repository</a></li><li><a href=/2.12/tasks/extensions/>Using extensions</a></li><li><a href=/2.12/tasks/gitops/>Using GitOps with Linkerd with Argo CD</a></li><li><a href=/2.12/tasks/using-the-debug-container/>Using the Debug Sidecar</a></li><li><a href=/2.12/tasks/validating-your-traffic/>Validating your mTLS traffic</a></li></ul></li><li><a href=/2.12/reference/>Reference
</a><input class=toggle__input type=checkbox id=toggle-b8c7e85e215b478062e7a8ddd5fba4c9>
<label class=toggle__label for=toggle-b8c7e85e215b478062e7a8ddd5fba4c9><svg class="icon icon--secondary" viewBox="0 0 24 24"><path d="M8.59 16.58 13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg></label><ul class=toggle__target><li><a href=/2.12/reference/architecture/>Architecture</a></li><li><a href=/2.12/reference/authorization-policy/>Authorization Policy</a></li><li><a href=/2.12/reference/cli/>CLI
</a><input class=toggle__input type=checkbox id=toggle-54b83bb178e9cf628a47c1558b11db07>
<label class=toggle__label for=toggle-54b83bb178e9cf628a47c1558b11db07><svg class="icon icon--secondary" viewBox="0 0 24 24"><path d="M8.59 16.58 13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg></label><ul class=toggle__target><li><a href=/2.12/reference/cli/authz/>authz</a></li><li><a href=/2.12/reference/cli/check/>check</a></li><li><a href=/2.12/reference/cli/completion/>completion</a></li><li><a href=/2.12/reference/cli/diagnostics/>diagnostics</a></li><li><a href=/2.12/reference/cli/identity/>identity</a></li><li><a href=/2.12/reference/cli/inject/>inject</a></li><li><a href=/2.12/reference/cli/install/>install</a></li><li><a href=/2.12/reference/cli/install-cni/>install-cni</a></li><li><a href=/2.12/reference/cli/jaeger/>jaeger</a></li><li><a href=/2.12/reference/cli/multicluster/>multicluster</a></li><li><a href=/2.12/reference/cli/profile/>profile</a></li><li><a href=/2.12/reference/cli/uninject/>uninject</a></li><li><a href=/2.12/reference/cli/uninstall/>uninstall</a></li><li><a href=/2.12/reference/cli/upgrade/>upgrade</a></li><li><a href=/2.12/reference/cli/version/>version</a></li><li><a href=/2.12/reference/cli/viz/>viz</a></li></ul></li><li><a href=/2.12/reference/cluster-configuration/>Cluster Configuration</a></li><li><a href=/2.12/reference/extension-list/>Extensions List</a></li><li><a href=/2.12/reference/helm-chart-version-matrix/>Helm Chart Version Matrix</a></li><li><a href=/2.12/reference/iptables/>IPTables Reference</a></li><li><a href=/2.12/reference/proxy-configuration/>Proxy Configuration</a></li><li><a href=/2.12/reference/proxy-log-level/>Proxy Log Level</a></li><li><a href=/2.12/reference/proxy-metrics/>Proxy Metrics</a></li><li><a href=/2.12/reference/service-profiles/>Service Profiles</a></li></ul></li></ul><ul><li><a href=/what-is-a-service-mesh/>What is a service mesh?</a></li><li><a href=/faq/>Frequently Asked Questions</a></li><li><a href=/releases/>Releases and Versions</a></li><li><a href=/design-principles/>Design Principles</a></li><li><a href=/going-to-production/>Going to Production</a></li><li><a href=/service-mesh-glossary/>Service Mesh Glossary</a></li></ul></nav><div class=docs__community><ul><li><a href=https://github.com/linkerd/linkerd2 target=_blank rel=noopener><img src=/logos/github.svg alt=GitHub class=img></a></li><li><a href=https://slack.linkerd.io target=_blank rel=noopener><img src=/logos/slack.svg alt=Slack class=img></a></li><li><a href=https://linkerd.buoyant.io target=_blank rel=noopener><img src=/logos/forum.png alt="Linkerd Forum" class=img></a></li></ul></div></div></div><div class=docs__main><div class=docs__body><div class=docs__header><h1>Control Plane Debug Endpoints</h1></div><div class="docs__content prose"><p>All of the control plane components expose runtime profiling information through
the path <code>/debug/pprof</code>, using Go&rsquo;s
<a href=https://golang.org/pkg/net/http/pprof/ target=_blank rel=noopener>pprof</a> package. This endpoint is
disabled by default but can be enabled to gather profiling data.</p><p>You can consume the provided data with <code>go tool pprof</code> to generate output in
many formats (PDF, DOT, PNG, etc).</p><p>The following diagnostics are provided (a summary with links is provided at
<code>/debug/pprof</code>):</p><ul><li>allocs: A sampling of all past memory allocations</li><li>block: Stack traces that led to blocking on synchronization primitives</li><li>cmdline: The command line invocation of the current program</li><li>goroutine: Stack traces of all current goroutines</li><li>heap: A sampling of memory allocations of live objects. You can specify the gc
GET parameter to run GC before taking the heap sample.</li><li>mutex: Stack traces of holders of contended mutexes</li><li>profile: CPU profile. You can specify the duration in the seconds GET
parameter. After you get the profile file, use the go tool pprof command to
investigate the profile.</li><li>threadcreate: Stack traces that led to the creation of new OS threads</li><li>trace: A trace of execution of the current program. You can specify the
duration in the seconds GET parameter. After you get the trace file, use the
go tool trace command to investigate the trace.</li></ul><h2 id=example-usage class=anchor>Example Usage
<a href=#example-usage class=anchor__link><svg class="icon icon--primary" viewBox="0 0 24 24"><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7A5 5 0 002 12a5 5 0 005 5h4V15.1H7c-1.71.0-3.1-1.39-3.1-3.1M8 13h8V11H8v2m9-6H13V8.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1H13V17h4a5 5 0 005-5A5 5 0 0017 7z"/></svg></a></h2><p>The pprof endpoint can be enabled by setting the <code>--set enablePprof=true</code> flag
when installing or upgrading Linkerd or by setting the <code>enablePprof=true</code> Helm
value.</p><p>This data is served over the <code>admin-http</code> port.
To find this port, you can examine the pod&rsquo;s yaml, or for the identity pod for
example, issue a command like so:</p><div class=highlight><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>kubectl -n linkerd get po <span style=color:#79c0ff>\
</span></span></span><span style=display:flex><span><span style=color:#79c0ff></span>    <span style=color:#ff7b72>$(</span>kubectl -n linkerd get pod -l linkerd.io/control-plane-component<span style=color:#ff7b72;font-weight:700>=</span>identity <span style=color:#79c0ff>\
</span></span></span><span style=display:flex><span><span style=color:#79c0ff></span>        -o <span style=color:#79c0ff>jsonpath</span><span style=color:#ff7b72;font-weight:700>=</span><span style=color:#a5d6ff>&#39;{.items[0].metadata.name}&#39;</span><span style=color:#ff7b72>)</span> <span style=color:#79c0ff>\
</span></span></span><span style=display:flex><span><span style=color:#79c0ff></span>    -o<span style=color:#ff7b72;font-weight:700>=</span><span style=color:#79c0ff>jsonpath</span><span style=color:#ff7b72;font-weight:700>=</span><span style=color:#a5d6ff>&#39;{.spec.containers[*].ports[?(@.name==&#34;admin-http&#34;)].containerPort}&#39;</span>
</span></span></code></pre></div><p>Then use the <code>kubectl port-forward</code> command to access that port from outside
the cluster (in this example the port is 9990):</p><div class=highlight><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>kubectl -n linkerd port-forward <span style=color:#79c0ff>\
</span></span></span><span style=display:flex><span><span style=color:#79c0ff></span>    <span style=color:#ff7b72>$(</span>kubectl -n linkerd get pod -l linkerd.io/control-plane-component<span style=color:#ff7b72;font-weight:700>=</span>identity <span style=color:#79c0ff>\
</span></span></span><span style=display:flex><span><span style=color:#79c0ff></span>        -o <span style=color:#79c0ff>jsonpath</span><span style=color:#ff7b72;font-weight:700>=</span><span style=color:#a5d6ff>&#39;{.items[0].metadata.name}&#39;</span><span style=color:#ff7b72>)</span> <span style=color:#79c0ff>\
</span></span></span><span style=display:flex><span><span style=color:#79c0ff></span>    <span style=color:#a5d6ff>9990</span>
</span></span></code></pre></div><p>It is now possible to use <code>go tool</code> to inspect this data. For example to
generate a graph in a PDF file describing memory allocations:</p><div class=highlight><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>go tool pprof -seconds <span style=color:#a5d6ff>5</span> -pdf http://localhost:9990/debug/pprof/allocs
</span></span></code></pre></div></div></div></div></div></div></main><footer class=main-footer><div class=main-footer__top><div class="main-footer__container container"><div class=main-footer__info><p><img src=/logos/linkerd.png alt=Linkerd></p><p>Linkerd was originally created by <a href=https://buoyant.io/ target=_blank rel=noopener>Buoyant</a></p><p>View <a href=https://github.com/linkerd/linkerd/wiki/Linkerd-code-of-conduct target=_blank rel=noopener>Code of Conduct</a></p></div><div class=main-footer__links><div class=main-footer__community><h4>Community</h4><ul><li><a href=https://github.com/linkerd/linkerd2 target=_blank rel=noopener>GitHub</a></li><li><a href=https://slack.linkerd.io target=_blank rel=noopener>Slack</a></li><li><a href=https://linkerd.buoyant.io target=_blank rel=noopener>Linkerd Forum</a></li></ul></div><div class=main-footer__follow><h4>Follow</h4><ul><li><a href=https://www.linkedin.com/company/linkerd/ target=_blank rel=noopener>Linkedin</a></li><li><a href=https://www.youtube.com/buoyantio target=_blank rel=noopener>YouTube</a></li><li><a href=https://twitter.com/linkerd target=_blank rel=noopener>Twitter</a></li></ul></div></div></div></div><div class=main-footer__bottom><div class="main-footer__container container"><p><a href=https://github.com/linkerd/website/tree/main/linkerd.io/content target=_blank rel=noopener>Edit This Site</a></p><p>Copyright Â© 2024 Linkerd Authors. All rights reserved.</p></div></div></footer></body></html>